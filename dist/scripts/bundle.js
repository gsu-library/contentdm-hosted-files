(()=>{var R=!1;function T(){var g=!1,S=!1,E=document.location.search.slice(1).split("&");for(f=0;f<E.length;f++)E[f].startsWith("debugCss")?g=!0:E[f].startsWith("removeCss")?S=!0:E[f].startsWith("removeJs")&&(R=!0);if(g||S){links=document.getElementsByTagName("link");for(var f=0;f<links.length;f++)if(links[f].getAttribute("href")=="/customizations/global//styles.min.css"){if(console.log("Removing local CSS."),links[f].parentNode.removeChild(links[f]),S)break;console.log("Adding CSS from static.");var h="gsuStyle";if(!document.getElementById(h)){var p=document.createElement("link");p.id=h,p.rel="stylesheet",p.href="https://static.library.gsu.edu/contentdm/styles.css",document.head.appendChild(p)}break}}if(R)return;var I="gsuFont";if(!document.getElementById(I)){var p=document.createElement("link");p.id=I,p.rel="stylesheet",p.href="https://fonts.googleapis.com/css?family=Lato&display=swap",document.head.appendChild(p)}var u=document.getElementById("search-input");u&&u.addEventListener("keydown",function(q){q.keyCode===13&&(u.blur(),document.body.focus())});var n="gsuWrapper";if(!document.getElementById(n)){var o=document.querySelector(".CoreLayout-mainWrapperContainer"),l=o.parentNode,e=document.createElement("div");e.className="container",e.setAttribute("id",n),l.insertBefore(e,o),e.appendChild(o)}var a="gsuTitle";if(!document.getElementById(a)){var c=document.getElementById("headerNameDiv");if(c){var r=document.createElement("h2");r.innerHTML='<a href="https://digitalcollections.library.gsu.edu">Digital Collections</a>';var L=document.createElement("h3");L.innerHTML='<a href="https://library.gsu.edu/">Georgia State University Library</a>';var b=document.createElement("div");b.setAttribute("id",a),b.innerHTML=r.outerHTML+L.outerHTML,c.innerHTML=b.outerHTML}}var C="gsuHeader";if(!document.getElementById(C)){var y=document.querySelector(".Header-logoNameContainer"),v=document.querySelector(".Header-logoHolder"),w=document.getElementById("headerNameDiv"),x=document.querySelector(".SimpleSearch-searchBox");if(y&&v&&w&&x){v.classList.add("col-sm-3"),w.classList.add("col-sm-6"),x.classList.add("col-sm-3");var e=document.createElement("div");e.setAttribute("id",C),e.className="row",y.insertBefore(e,v),e.appendChild(v),e.appendChild(w),e.appendChild(x)}let q;(q=document.querySelector(".Header-logoImage"))&&(q.parentNode.href="https://library.gsu.edu/")}let _,B,M;(_=document.querySelector(".ItemView-itemMetadata"))&&((M=document.querySelector(".field-discl"))&&_.prepend(M),(B=document.querySelector(".field-access"))&&_.prepend(B))}function D(){var g=document.querySelectorAll(".Card-cardcontainer.col-sm-6");for(i=0;i<g.length;i++)g[i].classList.remove("col-sm-6"),g[i].classList.add("col-sm-3")}function O(){var g=window.location.href.match(/collection\/([a-zA-Z0-9-_]+)\//i)[1],S=document.querySelector(".field-digcol .field-value"),E=[{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - City Planning Maps",slug:"atlmaps"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Oral Histories",slug:"atlpoh"},{name:"Planning Atlanta, A New City in the Making, 1949 - Aerial Mosaic and Photographs",slug:"atlaerial"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Photographs",slug:"atlphotos"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Planning Publications",slug:"planATLpubs"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Population-Housing Data",slug:"atlphdata"}];if(S&&(S=S.textContent)){var f=E.find(b=>b.name===S);typeof f<"u"&&(g=f.slug)}var h=document.querySelector(".field-identi .field-value span");h=h?h.innerHTML:null,h=h.replace(/<[^>]*>?/gm,"");var p=document.querySelector(".field-georef .field-value span");p=p?p.innerHTML.toLowerCase().replace(/<[^>]*>?/gm,""):null,p=p=="yes";let I=document.querySelector(".ItemUrl-itemUrlLink a");if(I=I?I.href.replace(/^http:\/\//i,"https://"):null,I){console.log("This is an item link page.");let b=[{urlMatch:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php",idMatch:/cachefile=(.+)$/,embedUrl:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php?cachefile=",iframeAttributes:'width="100%" height="700"'},{urlMatch:"https://www.youtube.com/embed/",idMatch:/\/embed\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://youtu.be/",idMatch:/\.be\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://www.youtube.com/watch",idMatch:/v=(.+)&|v=(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/media",idMatch:/\/([\w\d_-]+)$/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/embed",idMatch:/entryId\/([\w\d_-]+)/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://vimeo.com/",idMatch:/vimeo.com\/(.+)$/,embedUrl:"https://player.vimeo.com/video/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'}],C=document.querySelector(".ItemPreview-container"),y=null,v=null;for(let w=0;w<b.length;w++)if(I.startsWith(b[w].urlMatch)){v=I.match(b[w].idMatch);for(let x=1;x<v.length;x++)if(typeof v[x]<"u"&&v[x]){y='<iframe src="'+b[w].embedUrl+v[x]+'" '+b[w].iframeAttributes+"></iframe>";break}break}y&&C&&(C.innerHTML=y)}if(h&&g&&p){console.log("This item is georeferenced with a collection of "+g+" and an id of "+h+".");var u="https://webapps.library.gsu.edu/overlay/"+g+"/"+h+"/",n="https://geo.library.gsu.edu/geoserver/wms/kml?layers="+h,o="https://geo.library.gsu.edu/geotiffs/"+g+"/"+h+"_geo.tif",l=document.createDocumentFragment(),e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" target="_blank" href="'+u+'"><span class="fa fa-map"></span> Map Overlay</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+n+'"><span class="fa fa-globe"></span> Google Earth</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+o+'"><span class="fa fa-download"></span> GeoTiff</a>',l.appendChild(e);var a=document.querySelectorAll(".btn-toolbar");for(i=0;i<a.length;i++)a[i].appendChild(l.cloneNode(!0))}if(h&&g&&g=="atlphdata"){console.log("ATL Population and Housing Data.");var c="https://static.library.gsu.edu/contentdm/atlphdata/excel/"+h+".xls",r="https://static.library.gsu.edu/contentdm/atlphdata/csv/"+h+".zip",l=document.createDocumentFragment(),e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+c+'"><span class="fa fa-file"></span> Excel</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+r+'"><span class="fa fa-file"></span> CSV</a>',l.appendChild(e);var a=document.querySelectorAll(".btn-toolbar");for(i=0;i<a.length;i++)a[i].appendChild(l.cloneNode(!0))}if(h&&g&&(g=="planATLpubs"||g=="atlphdata")){console.log("Adding search link to planATLpubs and atlphdata.");var L="/digital/search/collection/PlanATL/searchterm/"+h,e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+L+`"><span class="fa fa-search"></span> View Item's Maps</a>`;var a=document.querySelectorAll(".btn-toolbar");for(i=0;i<a.length;i++)a[i].appendChild(e.cloneNode(!0))}}document.addEventListener("cdm-home-page:ready",function(){T(),R||D()});document.addEventListener("cdm-search-page:ready",function(){T()});document.addEventListener("cdm-advanced-search-page:ready",function(){T()});document.addEventListener("cdm-collection-page:ready",function(){T()});document.addEventListener("cdm-collection-landing-page:ready",function(){T()});document.addEventListener("cdm-collection-search-page:ready",function(){T()});document.addEventListener("cdm-item-page:ready",function(){T(),R||O()});document.addEventListener("cdm-custom-page:ready",function(){T()});document.addEventListener("cdm-about-page:ready",function(){T()});document.addEventListener("cdm-login-page:ready",function(){T()});document.addEventListener("cdm-notfound-page:ready",function(){T()});(function(){"use strict";let g=window.location.origin?window.location.origin+"/":window.location.protocol+"//"+window.location.host,S='<svg height="2em" width="2em" style="margin-bottom:-5px;" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" style="enable-background:new" version="1.1" id="svg2" xml:space="preserve" width="586.95789" height="534.94623" viewBox="0 0 586.95789 534.94622"> <metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs6" /><g style="display:inline" id="g10" transform="matrix(1.3333333,0,0,-1.3333333,42.08939,487.43895)"> <g style="display:inline;" id="layer4"><rect ry="56.48138" transform="scale(1,-1)" y="-354.32922" x="-20.317043" height="378.70969" width="417.71841" id="rect2281" style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:22.5;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" /> </g><g id="g12" transform="scale(0.1)"><path d="M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path14" /><path d="m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path16" /><path d="M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path18" /><path d="m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path20" /><path d="m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path22" /><path d="m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path24" /><path d="m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path26" /></g></g></svg>';function E(o,l){let e={parent:null};return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${l}/${o}/json`).then(function(a){return a.json()}).then(function(a){return a.parent===-1?e.parent=o:e.parent=a.parent,e}).catch(function(a){return console.log("Parent request failed: "+a),!1})}function f(o,l){return fetch(`/iiif/info/${l}/${o.parent}/manifest.json`).then(function(e){return e.status==404?(console.info(`No IIIF manifest exists for this record (id=${o.parent}).`),!1):e.json()}).then(function(e){let a=e;if(!!a.sequences[0].canvases[0]["@id"]){let r=a.sequences[0].canvases,L=[];for(let b=0;b<r.length;b++){let C=r[b]["@id"],v=C.indexOf(l)+l.length+1,w=C.indexOf("/canvas/"),x=C.slice(v,w);b===0&&(o.child=x),L.push(x)}o={...o,allChildren:L}}else o.child=null,o.allChildren=null;return o}).catch(function(e){return console.log("Manifest request failed: "+e),!1})}function h(o,l,e){let a=document.createDocumentFragment(),c=document.createElement("tr");c.classList.add("ItemMetadata-metadatarow",o);let r=document.createElement("td");r.classList.add("ItemMetadata-key","field-label"),r.style.verticalAlign="bottom",r.innerHTML=l;let L=document.createElement("td");L.classList.add("field-value");let b=document.createElement("span");return b.classList.add("field-value-span"),b.appendChild(e),L.appendChild(b),c.appendChild(r),c.appendChild(L),a.appendChild(c),a}let p={insertManifestLink:function(o,l,e,a,c){let r=document.querySelector("div#compoundObjectDescription>div>table>tbody"),L=document.querySelector("div#compoundItemDescription>div>table>tbody"),b=document.querySelector("div#singleItemDescription>div>table>tbody");function C(y,v,w,x,_,B){let M=document.createElement("a");M.target="_blank";let q,d,t,s,m,N,k,A,P,F=document.querySelector(".CompoundItemView-thumbnail");if(F){let H=F.getAttribute("src");N=H.indexOf("/id/")+4,k=H.slice(N),A=k.indexOf("/"),P=k.slice(0,A)}w?y===v&&P===w?(s=y,m=w):(s=v,m=y):(console.log("no child"),s=y,m=y);let j=!1;if(B==="manifest"?(j=!0,q=`${g}iiif/2/${_}:${s}/manifest.json`,M.title="View IIIF Manifest",d="IIIF Manifest",t="iiif-manifest-link"):B==="image"&&x.includes(m)&&(j=!0,q=`${g}iiif/2/${_}:${m}/full/full/0/default.jpg`,M.title="View IIIF Image",d="IIIF Image",t="iiif-image-link"),j)return M.href=q,M.setAttribute("aria-label",M.title),M.innerHTML=S+" "+q,h(t,d,M)}if(!r){let y=C(o,l,e,a,c,"manifest");b.appendChild(y);let v=C(o,l,e,a,c,"image");b.appendChild(v)}if(r){let y=C(o,l,e,a,c,"manifest");r.appendChild(y);let v=C(o,l,e,a,c,"image");L.appendChild(v)}},removeLink:function(){Array.from(document.querySelectorAll(".iiif-manifest-link")).forEach(function(o){o&&o.parentElement&&o.parentElement.removeChild(o)}),Array.from(document.querySelectorAll(".iiif-image-link")).forEach(function(o){o&&o.parentElement&&o.parentElement.removeChild(o)})}},I=!1,u=["afpl"],n=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",function(o){let l=o.detail.itemId,e=o.detail.collectionId,a=document.querySelector(".field-creato .field-value a");a=a?a.text:null,(I||!u.includes(e)&&!n.includes(a))&&E(l,e).then(function(c){c&&f(c,e).then(function(r){if(r)p.insertManifestLink(l,r.parent,r.child,r.allChildren,e);else return})})}),document.addEventListener("cdm-item-page:update",function(o){let l=o.detail.itemId,e=o.detail.collectionId,a=document.querySelector(".field-creato .field-value a");a=a?a.text:null,p.removeLink(),(I||!u.includes(e)&&!n.includes(a))&&E(l,e).then(function(c){c&&f(c,e).then(function(r){if(r)p.insertManifestLink(l,r.parent,r.child,r.allChildren,e);else return})})}),document.addEventListener("cdm-item-page:leave",function(o){let l=o.detail.collectionId,e=document.querySelector(".field-creato .field-value a");e=e?e.text:null,(I||!u.includes(l)&&!n.includes(e))&&p.removeLink()})})();(function(){"use strict";function g(o){return new Promise(function(l,e){let a=document.createElement("script");a.src=o,a.onload=l,a.onerror=e,document.head.appendChild(a)})}let S=window.location.origin?`${window.location.origin}/`:`${window.location.protocol}//${window.location.host}/`;function E(o,l){return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${l}/${o}/json`).then(e=>e.json()).then(e=>{let a=!1;return e.parent===-1?a=o:a=e.parent,a}).then(e=>fetch(`/iiif/info/${l}/${e}/manifest.json`).then(a=>a.status!=200?(console.log("No IIIF manifest exists for this record."),e=!1,e):fetch(`/digital/api/collections/${l}/items/${e}/false`).then(c=>c.json()).then(c=>(c.filename.split(".").pop()==="pdf"&&(console.log("pdf?",c.filename.split(".").pop()),e=!1),e)).catch(c=>console.log("Item API request failed.",c))).catch(a=>(console.log("Manifest request failed.",a),e=!1,e))).catch(function(e){return console.log("GetParent request failed.",e),parent=!1,parent})}let f={getMiradorUrl:function(o,l){return`/digital/custom/mirador?manifest=${`${S}/iiif/info/${l}/${o}/manifest.json`}`},add:function(o,l){let e=document.createElement("div");e.className="btn-group btn-group-default mirador-button";let a=document.createElement("a");a.title="View this item in Mirador",a.className="cdm-btn btn btn-primary",a.href=f.getMiradorUrl(o,l),a.style.paddingTop="5px",a.style.paddingBottom="2px",a.target="_blank",a.innerHTML=' <svg xmlns="http://www.w3.org/2000/svg" height="1.8em" viewBox="0 0 60 55" style="fill: currentColor;"><rect width="18" height="55" /><rect width="18" height="55" transform="translate(42)" /><rect width="18" height="34" transform="translate(21)" /></svg> ',e.appendChild(a),Array.from(document.querySelectorAll(".ItemOptions-itemOptions>.btn-toolbar")).forEach(c=>{c.appendChild(e.cloneNode(!0))})},remove:function(){Array.from(document.querySelectorAll(".mirador-button")).forEach(o=>{o&&o.parentElement&&o.parentElement.removeChild(o)})}},h=function(){let o="mirador";if(!document.getElementById(o)){let l=document.createElement("link");l.id=o,l.rel="stylesheet",l.type="text/css",l.href="/customizations/global/pages/mirador/css/mirador-combined.css",l.media="all",document.head.appendChild(l)}},p=function(){let o={};location.search.split(/\&|\?/g).forEach(function(e){if(e){let a=e.split("="),c=a[0],r=a[1];o[c]=r}});let l={id:"viewer",data:[],buildPath:"/customizations/global/pages/mirador/"};o.manifest&&(l.data.push({manifestUri:o.manifest,location:o.collection||""}),l.windowObjects=[{loadedManifest:o.manifest,canvasID:o.canvas||""}]),Mirador(l)},I=!1,u=["afpl"],n=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",function(o){let l=o.detail.itemId,e=o.detail.collectionId,a=document.querySelector(".field-creato .field-value a");a=a?a.text:null,(I||!u.includes(e)&&!n.includes(a))&&E(l,e).then(function(c){c!==!1&&f.add(c,e)})}),document.addEventListener("cdm-item-page:update",function(o){let l=o.detail.itemId,e=o.detail.collectionId,a=document.querySelector(".field-creato .field-value a");a=a?a.text:null,(I||!u.includes(e)&&!n.includes(a))&&E(l,e).then(function(c){if(c===!1){f.remove();return}else f.remove(),f.add(c,e)})}),document.addEventListener("cdm-item-page:leave",function(o){let l=o.detail.collectionId,e=document.querySelector(".field-creato .field-value a");e=e?e.text:null,(I||!u.includes(l)&&!n.includes(e))&&f.remove()}),document.addEventListener("cdm-custom-page:enter",function(o){o.detail.filename=="mirador"&&g("/customizations/global/pages/js/mirador-cp.js").then(function(){h()})}),document.addEventListener("cdm-custom-page:ready",function(o){o.detail.filename=="mirador"&&g("/customizations/global/pages/mirador/mirador.js").then(function(){p()})})})();(function(){"use strict";let g="https://cdmdemo.contentdm.oclc.org/customizations/global/pages/img/";function S(u){return localStorage.getItem(u)}function E(){return fetch("/customizations/global/pages/js/rights.json").then(u=>u.json()).then(u=>u).catch(u=>(console.log("Rights JSON request failed:",u),!1))}function f(u){let n=!1;if(u){let o=document.querySelectorAll("tr.ItemMetadata-metadatarow > td.field-value > span");Array.from(o).forEach(l=>{l.innerText&&u.right.forEach(e=>{e.uri===l.innerText&&(n=e)})})}return n}function h(u){if(u){let n=document.querySelectorAll("tr.ItemMetadata-metadatarow > td.field-value > span");Array.from(n).forEach(o=>{o.innerText&&u.right.forEach(l=>{if(l.uri===o.textContent){let e=document.createElement("div");e.id="right-badge-ui";let a=document.createElement("div");a.style.margin="0.5em 0",a.innerHTML=`<img style="height: 2.2em;" src="${g}${l.button_url.file}"/>`;let c=document.createElement("div");c.style.margin="0.5em 0",c.innerHTML=`${l.name}`;let r=document.createElement("div");r.style.wordBreak="normal",r.innerHTML=`${l.text_en}`,e.append(a,c,r),o.append(e)}})})}}let p=!0,I=[];["cdm-item-page:ready","cdm-item-page:update"].forEach(function(u){document.addEventListener(u,function(n){let o=n.detail.itemId,l=n.detail.collectionId;(p||I.includes(l))&&(document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove(),E().then(e=>{h(e)}))})}),document.addEventListener("cdm-item-page:leave",function(u){let n=u.detail.collectionId;(p||I.includes(n))&&document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove()})})();(()=>{var g="https://gsu.aeon.atlas-sys.com/logon",S="Request Item",E="Request in Reading Room",f="Digital Copy/Licensing",h=!1,p="GenericRequestManuscript",I=!1,u="GenericRequestManuscriptPhotodup",n={ItemTitle:"collec",ItemSubTitle:"title",ItemDate:"date",DocumentType:"",ItemAuthor:"creato",ItemAuthor2:"interv",ItemAuthor3:"photog",ItemPlace:"",ItemPublisher:"",ItemEdition:"",ItemVolume:"box",ItemIssue:"folder",ItemIssue2:"file",ItemPages:"",Location:"curato",SubLocation:"",PageCount:"",ItemISxN:"",ItemCitation:"",ItemNumber:"identi",ItemNumber2:"arrang",EADNumber:"",ReferenceNumber:"",CallNumber:"call",Format:"sourca",ServiceLevel:"",ShippingOption:"",ForPublication:"",ItemInfo1:"righth",ItemInfo2:"note",ItemInfo3:"",ItemInfo4:"",ItemInfo5:""},o=!1,l=null,e=null,a=null,c=null,r=null,L=null;document.addEventListener("cdm-item-page:ready",function(d){if(document.getElementById("singleItemDescription")?l="single item":document.getElementById("compoundItemDescription")&&(l="compound object"),b(d.detail.collectionId,d.detail.itemId).then(A=>e=A),C(d.detail.collectionId,d.detail.itemId).then(A=>a=A),y(d.detail.collectionId,d.detail.itemId).then(A=>c=A),v(d.detail.collectionId,d.detail.itemId).then(A=>r=A),w(d.detail.collectionId,d.detail.itemId).then(A=>r=A),l&&(l==="single item"||l==="compound object")){if(document.getElementsByClassName("btn-toolbar")){var t=document.getElementsByClassName("btn-toolbar"),s='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+l+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown-mobile" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text_mobile" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar-mobile" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan_mobile" class="aeon_button_option spacePad5" iopt="Loan">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy_mobile" class="aeon_button_option spacePad5" iopt="Copy">Request Copy</a></li></ul>',m=document.createElement("div");m.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),m.setAttribute("id","aeon_button_container_mobile"),m.innerHTML=s,t[0].appendChild(m);var N='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+l+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan" class="aeon_button_option spacePad5" iopt="Loan" style="cursor:pointer">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy" class="aeon_button_option spacePad5" iopt="Copy" style="cursor:pointer">Request Copy</a></li></ul>',k=document.createElement("div");k.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),k.setAttribute("id","aeon_button_container"),k.innerHTML=N,t[1].appendChild(k),B(),window.addEventListener("click",function(A){document.getElementById("aeon-dropdown").contains(A.target)||(document.getElementById("aeonrequestmenu-side-bar").classList.remove("show"),document.getElementById("aeon_button_container").classList.remove("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","false")),document.getElementById("aeon-dropdown-mobile").contains(A.target)||(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.remove("show"),document.getElementById("aeon_button_container_mobile").classList.remove("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","false"))})}}else console.log("Cannot find view element")}),document.addEventListener("cdm-item-page:update",function(d){b(d.detail.collectionId,d.detail.itemId).then(t=>e=t),C(d.detail.collectionId,d.detail.itemId).then(t=>a=t),y(d.detail.collectionId,d.detail.itemId).then(t=>c=t),v(d.detail.collectionId,d.detail.itemId).then(t=>r=t),w(d.detail.collectionId,d.detail.itemId).then(t=>L=t)});function b(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+t+"/json").then(s=>s.json()).then(s=>(console.log("Item Info"),console.log(s),s)).catch(s=>console.warn(s))}function C(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+d+"/"+t+"/json").then(s=>s.json()).then(s=>(console.log("Object Info"),console.log(s),s)).catch(s=>console.warn(s))}function y(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+d+"/"+t+"/json").then(s=>s.json()).then(s=>s).catch(s=>console.warn(s))}function v(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+d+"/"+t+"/json").then(s=>s.json()).then(s=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+s.parent+"/json").then(m=>m.json()).then(m=>(console.log("Parent Item Info"),console.log(m),m)).catch(m=>console.warn(m))).catch(s=>console.warn(s))}function w(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+d+"/"+t+"/json").then(s=>s.json()).then(s=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+s.page[0].pageptr+"/json").then(m=>m.json()).then(m=>(console.log("Child Item Info"),console.log(m),m)).catch(m=>console.warn(m))).catch(s=>console.warn(s))}function x(d){var t={};return t.ItemTitle=e[n.ItemTitle],t.ItemSubTitle=e[n.ItemSubTitle],t.ItemDate=e[n.ItemDate],t.DocumentType=e[n.DocumentType],t.ItemAuthor=e[n.ItemAuthor]+", "+e[n.ItemAuthor2]+", "+e[n.ItemAuthor3],t.ItemPlace=e[n.ItemPlace],t.ItemPublisher=e[n.ItemPublisher],t.ItemEdition=e[n.ItemEdition],t.ItemVolume=e[n.ItemVolume],t.ItemIssue=e[n.ItemIssue]+", "+e[n.ItemIssue2],t.ItemPages=e[n.ItemPages],t.Location=e[n.Location],t.SubLocation=e[n.SubLocation],t.PageCount=e[n.PageCount],t.ItemISxN=e[n.ItemISxN],t.ItemCitation=window.location.href,t.ItemNumber=e[n.ItemNumber]+", "+e[n.ItemNumber2],t.EADNumber=e[n.EADNumber],t.ReferenceNumber=e[n.ReferenceNumber],t.CallNumber=e[n.CallNumber],t.Format=e[n.Format],t.ServiceLevel=e[n.ServiceLevel],t.ShippingOption=e[n.ShippingOption],t.ForPublication=e[n.ForPublication],t.ItemInfo1=e[n.ItemInfo1],t.ItemInfo2=e[n.ItemInfo2],t.ItemInfo3=e[n.ItemInfo3],t.ItemInfo4=e[n.ItemInfo4],t.ItemInfo5=e[n.ItemInfo5],c.parent==-1&&a.code!=-2&&L!==null?t.ItemSubTitle=L[n.ItemSubTitle]:c.parent!=-1&&(t.ItemTitle=r[n.ItemTitle],t.ItemDate=r[n.ItemDate],t.DocumentType=r[n.DocumentType],t.ItemAuthor=r[n.ItemAuthor]+", "+r[n.ItemAuthor2]+", "+r[n.ItemAuthor3],t.ItemPlace=r[n.ItemPlace],t.ItemPublisher=r[n.ItemPublisher],t.ItemEdition=r[n.ItemEdition],t.ItemVolume=r[n.ItemVolume],t.ItemIssue=r[n.ItemIssue]+", "+r[n.ItemIssue2],t.ItemPages=r[n.ItemPages],t.Location=r[n.Location],t.SubLocation=r[n.SubLocation],t.PageCount=r[n.PageCount],t.ItemISxN=r[n.ItemISxN],t.ItemCitation=r[n.ItemCitation],t.ItemNumber=r[n.ItemNumber]+", "+r[n.ItemNumber2],t.EADNumber=r[n.EADNumber],t.ReferenceNumber=r[n.ReferenceNumber],t.CallNumber=r[n.CallNumber],t.Format=r[n.Format],t.ServiceLevel=r[n.ServiceLevel],t.ShippingOption=r[n.ShippingOption],t.ForPublication=r[n.ForPublication],t.ItemInfo1=r[n.ItemInfo1],t.ItemInfo2=r[n.ItemInfo2],t.ItemInfo3=r[n.ItemInfo3],t.ItemInfo4=r[n.ItemInfo4],t.ItemInfo5=r[n.ItemInfo5]),t.RequestType=d,console.log("Request"),console.dir(t),t}function _(d){var t=g;d.RequestType==="Loan"?h?t=t+"?Action=10&Form=21":t=t+"?Action=10&Form=20&Value="+p:I?t=t+"?Action=10&Form=23":t=t+"?Action=10&Form=20&Value="+u;var s=[];for(var m in d)d[m]&&d[m]!==""&&s.push(m+"="+encodeURIComponent(d[m]));t=t+"&"+s.join("&"),console.log("Aeon Request -> "+t),window.open(t)}function B(){var d=document.getElementById("aeon-dropdown"),t=document.getElementById("aeon_button_text"),s=document.getElementById("aeon_button_option_loan"),m=document.getElementById("aeon_button_option_copy");t.innerHTML=S,d.onclick=function(){q(!1)},s.innerHTML=E,s.onclick=function(){M("Loan")},m.innerHTML=f,m.onclick=function(){M("Copy")};var N=document.getElementById("aeon-dropdown-mobile"),k=document.getElementById("aeon_button_text_mobile"),A=document.getElementById("aeon_button_option_loan_mobile"),P=document.getElementById("aeon_button_option_copy_mobile");k.innerHTML=S,N.onclick=function(){q(!0)},A.innerHTML=E,A.onclick=function(){M("Loan")},P.innerHTML=f,P.onclick=function(){M("Copy")}}function M(d){var t=x(d);_(t)}function q(d){d?(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.toggle("show"),document.getElementById("aeon_button_container_mobile").classList.toggle("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","true")):(document.getElementById("aeonrequestmenu-side-bar").classList.toggle("show"),document.getElementById("aeon_button_container").classList.toggle("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","true"))}})();})();
