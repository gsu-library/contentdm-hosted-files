(()=>{function k(){var g=!1,A=!1,E=!1,I=document.location.search.slice(1).split("&");for(c=0;c<I.length;c++)I[c].startsWith("debugCss")?g=!0:I[c].startsWith("removeCss")?A=!0:I[c].startsWith("removeJs")&&(E=!0);if(g||A){links=document.getElementsByTagName("link");for(var c=0;c<links.length;c++)if(links[c].getAttribute("href")=="/customizations/global//styles.min.css"){if(console.log("Removing local CSS."),links[c].parentNode.removeChild(links[c]),A)break;console.log("Adding CSS from static.");var h="gsuStyle";if(!document.getElementById(h)){var f=document.createElement("link");f.id=h,f.rel="stylesheet",f.href="https://static.library.gsu.edu/contentdm/styles.css",document.head.appendChild(f)}break}}if(E)return;var u="gsuFont";if(!document.getElementById(u)){var f=document.createElement("link");f.id=u,f.rel="stylesheet",f.href="https://fonts.googleapis.com/css?family=Lato&display=swap",document.head.appendChild(f)}var n=document.getElementById("search-input");n&&n.addEventListener("keydown",function(d){d.keyCode===13&&(n.blur(),document.body.focus())});var a="gsuWrapper";if(!document.getElementById(a)){var l=document.querySelector(".CoreLayout-mainWrapperContainer"),e=l.parentNode,o=document.createElement("div");o.className="container",o.setAttribute("id",a),e.insertBefore(o,l),o.appendChild(l)}var s="gsuTitle";if(!document.getElementById(s)){var r=document.getElementById("headerNameDiv");if(r){var C=document.createElement("h2");C.innerHTML='<a href="https://digitalcollections.library.gsu.edu">Digital Collections</a>';var b=document.createElement("h3");b.innerHTML='<a href="https://library.gsu.edu/">Georgia State University Library</a>';var L=document.createElement("div");L.setAttribute("id",s),L.innerHTML=C.outerHTML+b.outerHTML,r.innerHTML=L.outerHTML}}var y="gsuHeader";if(!document.getElementById(y)){var w=document.querySelector(".Header-logoNameContainer"),v=document.querySelector(".Header-logoHolder"),_=document.getElementById("headerNameDiv"),N=document.querySelector(".SimpleSearch-searchBox");if(w&&v&&_&&N){v.classList.add("col-sm-3"),_.classList.add("col-sm-6"),N.classList.add("col-sm-3");var o=document.createElement("div");o.setAttribute("id",y),o.className="row",w.insertBefore(o,v),o.appendChild(v),o.appendChild(_),o.appendChild(N)}let d;(d=document.querySelector(".Header-logoImage"))&&(d.parentNode.href="https://library.gsu.edu/")}let B,S,q;(B=document.querySelector(".ItemView-itemMetadata"))&&((q=document.querySelector(".field-discl"))&&B.prepend(q),(S=document.querySelector(".field-access"))&&B.prepend(S))}function F(){var g=document.querySelectorAll(".Card-cardcontainer.col-sm-6");for(i=0;i<g.length;i++)g[i].classList.remove("col-sm-6"),g[i].classList.add("col-sm-3")}function O(){var g=window.location.href.match(/collection\/([a-zA-Z0-9-_]+)\//i)[1],A=document.querySelector(".field-digcol .field-value"),E=[{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - City Planning Maps",slug:"atlmaps"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Oral Histories",slug:"atlpoh"},{name:"Planning Atlanta, A New City in the Making, 1949 - Aerial Mosaic and Photographs",slug:"atlaerial"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Photographs",slug:"atlphotos"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Planning Publications",slug:"planATLpubs"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Population-Housing Data",slug:"atlphdata"}];if(A&&(A=A.textContent)){var I=E.find(b=>b.name===A);typeof I<"u"&&(g=I.slug)}var c=document.querySelector(".field-identi .field-value span");c=c?c.innerHTML:null,c=c.replace(/<[^>]*>?/gm,"");var h=document.querySelector(".field-georef .field-value span");h=h?h.innerHTML.toLowerCase().replace(/<[^>]*>?/gm,""):null,h=h=="yes";let f=document.querySelector(".ItemUrl-itemUrlLink a");if(f=f?f.href.replace(/^http:\/\//i,"https://"):null,f){console.log("This is an item link page.");let b=[{urlMatch:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php",idMatch:/cachefile=(.+)$/,embedUrl:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php?cachefile=",iframeAttributes:'width="100%" height="700"'},{urlMatch:"https://www.youtube.com/embed/",idMatch:/\/embed\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://youtu.be/",idMatch:/\.be\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://www.youtube.com/watch",idMatch:/v=(.+)&|v=(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/media",idMatch:/\/([\w\d_-]+)$/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/embed",idMatch:/entryId\/([\w\d_-]+)/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://vimeo.com/",idMatch:/vimeo.com\/(.+)$/,embedUrl:"https://player.vimeo.com/video/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'}],L=document.querySelector(".ItemPreview-container"),y=null,w=null;for(let v=0;v<b.length;v++)if(f.startsWith(b[v].urlMatch)){w=f.match(b[v].idMatch);for(let _=1;_<w.length;_++)if(typeof w[_]<"u"&&w[_]){y='<iframe src="'+b[v].embedUrl+w[_]+'" '+b[v].iframeAttributes+"></iframe>";break}break}y&&L&&(L.innerHTML=y)}if(c&&g&&h){console.log("This item is georeferenced with a collection of "+g+" and an id of "+c+".");var u="https://webapps.library.gsu.edu/overlay/"+g+"/"+c+"/",n="https://geo.library.gsu.edu/geoserver/wms/kml?layers="+c,a="https://geo.library.gsu.edu/geotiffs/"+g+"/"+c+"_geo.tif",l=document.createDocumentFragment(),e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" target="_blank" href="'+u+'"><span class="fa fa-map"></span> Map Overlay</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+n+'"><span class="fa fa-globe"></span> Google Earth</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+a+'"><span class="fa fa-download"></span> GeoTiff</a>',l.appendChild(e);var o=document.querySelectorAll(".btn-toolbar");for(i=0;i<o.length;i++)o[i].appendChild(l.cloneNode(!0))}if(c&&g&&g=="atlphdata"){console.log("ATL Population and Housing Data.");var s="https://static.library.gsu.edu/contentdm/atlphdata/excel/"+c+".xls",r="https://static.library.gsu.edu/contentdm/atlphdata/csv/"+c+".zip",l=document.createDocumentFragment(),e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+s+'"><span class="fa fa-file"></span> Excel</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+r+'"><span class="fa fa-file"></span> CSV</a>',l.appendChild(e);var o=document.querySelectorAll(".btn-toolbar");for(i=0;i<o.length;i++)o[i].appendChild(l.cloneNode(!0))}if(c&&g&&(g=="planATLpubs"||g=="atlphdata")){console.log("Adding search link to planATLpubs and atlphdata.");var C="/digital/search/collection/PlanATL/searchterm/"+c,e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+C+`"><span class="fa fa-search"></span> View Item's Maps</a>`;var o=document.querySelectorAll(".btn-toolbar");for(i=0;i<o.length;i++)o[i].appendChild(e.cloneNode(!0))}}function M(){if(!("customElements"in window))return;let g=document.createElement("template");g.innerHTML=`
     <style>
       .dialog {
          margin: 0 auto;
          top: 5%;
          max-width: 65ch;
          border: 1px solid hsla(0 0% 0% / 0.5);
          border-radius: 0.5em;
          box-shadow: 0 2.8px 2.2px hsla(0, 0%, 0%, 0.034),
                      0 6.7px 5.3px hsla(0, 0%, 0%, 0.048),
                      0 12.5px 10px hsla(0, 0%, 0%, 0.06),
                      0 22.3px 17.9px hsla(0, 0%, 0%, 0.072),
                      0 41.8px 33.4px hsla(0, 0%, 0%, 0.086),
                      0 100px 80px hsla(0, 0%, 0%, 0.12);
          color: currentColor;
          padding-inline: 1.5em;
          padding-block: 1.125em;
        }

        .dialog__header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          border-bottom: 1px solid lightgray;
        }

        .dialog__header *,
        .dialog__header ::slotted(*) {
          margin-block-start: 0;
        }

        .dialog__close-btn {
          border: none;
          background: transparent;
          color: currentColor;
          cursor: pointer;
        }

        .dialog__content {
          line-height: 1.5;
          margin-block: 1.5rem;
        }

        .dialog__continue-btn {
          padding: 1.25em 2em;
          color: white;
          border: 1px solid hsla(0 0% 0% / 0.125);
          border-radius: var(--btn-radius, none);
          background-color: var(--btn-continue-color, hsl(219, 100%, 33%));
          cursor: pointer;
        }

        a {
          color: hsl(219, 100%, 33%);
        }

        .dialog__footer {
          border-top: 1px solid lightgray;
        }

        .dialog::backdrop {
          background-color: hsla(0 0% 0% / 0.5);
        }

        .close {
          animation: slide-out-up 0.2s ease-out;
        }

        @keyframes slide-out-up {
          to {
            transform: translateY(-100%);
            opacity: 0;
          }
        }
     </style>

      <dialog id="dialog" class="dialog">
        <header class="dialog__header">
        <slot name="title">
          <h2 id="dialog-heading" class="dialog__heading">Potentially Offensive Content</h2>
        </slot>
          <button id="dialog-close" class="dialog__close-btn" aria-label="close dialog" aria-controls="dialog">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" aria-hidden="true" style="pointer-events:none" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10" opacity=".5"/><path stroke-linecap="round" d="m14.5 9.5l-5 5m0-5l5 5"/></g></svg>
          </button>
        </header>
        <section class="dialog__content">
          <slot name="content">
            <p>Some content in our collection may contain graphic images, offensive language, or material that conflicts with strongly held values or beliefs. We provide access to this content to preserve the historical record. We do not endorse the attitudes, prejudices, or behaviors it represents.</p>
            <p>If you are sensitive to this material, please do not proceed.</p>
            <p><button id="dialog-continue" class="dialog__continue-btn" aria-controls="dialog">Continue</button></p>
          </slot>
        </section>
        <footer class="dialog__footer">
          <slot name="footer">
          <p>For more information read our <a id="dialog-readmore" href="/digital/custom/offensive-content">Statement on Potentially Offensive Content</a>.</p>
          </slot>
        </footer>
      </dialog>
 `;class A extends HTMLElement{#e=!1;#t=0;constructor(){super(),this.root=this.attachShadow({mode:"closed"})}connectedCallback(){if(this.#e||!this.showAgain())return;this.root.append(g.content.cloneNode(!0));let c=this.root.querySelector("#dialog");c.showModal(),c.addEventListener("click",this.handleCloseModal.bind(this)),this.#e=!0}static get observedAttributes(){return["hide-for-days"]}attributeChangedCallback(c,h,f){c==="hide-for-days"&&(this.#t=Number(f))}showAgain(){let c=!0,h=new Date,f=window.localStorage.getItem("hideUntil");if(f){let u=new Date(f);c=h>u}return c}handleCloseModal(c){if(!c.target.matches("#dialog-close, #dialog-continue, #dialog-readmore"))return;let f=c.target.closest("dialog"),u=new Date;u.setDate(u.getDate()+this.#t),window.localStorage.setItem("hideUntil",u.toString()),f.classList.add("close"),window.setTimeout(()=>{f.close()},150)}}customElements.get("notice-dialog")||customElements.define("notice-dialog",A);let E=document.createElement("notice-dialog");E.setAttribute("hide-for-days",7),document.body.append(E)}function V(){var g="https://gsu.aeon.atlas-sys.com/logon",A="Request Item",E="Request in Reading Room",I="Digital Copy/Licensing",c=!1,h="GenericRequestManuscript",f=!1,u="GenericRequestManuscriptPhotodup",n={ItemTitle:"collec",ItemSubTitle:"title",ItemDate:"date",DocumentType:"",ItemAuthor:"creato",ItemAuthor2:"interv",ItemAuthor3:"photog",ItemPlace:"",ItemPublisher:"",ItemEdition:"",ItemVolume:"box",ItemIssue:"folder",ItemIssue2:"file",ItemPages:"",Location:"curato",SubLocation:"",PageCount:"",ItemISxN:"",ItemCitation:"",ItemNumber:"identi",ItemNumber2:"arrang",EADNumber:"",ReferenceNumber:"",CallNumber:"call",Format:"sourca",ServiceLevel:"",ShippingOption:"",ForPublication:"",ItemInfo1:"righth",ItemInfo2:"note",ItemInfo3:"",ItemInfo4:"",ItemInfo5:""},a=!1,l=null,e=null,o=null,s=null,r=null,C=null;document.addEventListener("cdm-item-page:ready",function(d){if(document.getElementById("singleItemDescription")?l="single item":document.getElementById("compoundItemDescription")&&(l="compound object"),b(d.detail.collectionId,d.detail.itemId).then(x=>e=x),L(d.detail.collectionId,d.detail.itemId).then(x=>o=x),y(d.detail.collectionId,d.detail.itemId).then(x=>s=x),w(d.detail.collectionId,d.detail.itemId).then(x=>r=x),v(d.detail.collectionId,d.detail.itemId).then(x=>r=x),l&&(l==="single item"||l==="compound object")){if(document.getElementsByClassName("btn-toolbar")){var t=document.getElementsByClassName("btn-toolbar"),m='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+l+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown-mobile" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text_mobile" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar-mobile" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan_mobile" class="aeon_button_option spacePad5" iopt="Loan">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy_mobile" class="aeon_button_option spacePad5" iopt="Copy">Request Copy</a></li></ul>',p=document.createElement("div");p.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),p.setAttribute("id","aeon_button_container_mobile"),p.innerHTML=m,t[0].appendChild(p);var P='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+l+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan" class="aeon_button_option spacePad5" iopt="Loan" style="cursor:pointer">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy" class="aeon_button_option spacePad5" iopt="Copy" style="cursor:pointer">Request Copy</a></li></ul>',T=document.createElement("div");T.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),T.setAttribute("id","aeon_button_container"),T.innerHTML=P,t[1].appendChild(T),B(),window.addEventListener("click",function(x){document.getElementById("aeon-dropdown").contains(x.target)||(document.getElementById("aeonrequestmenu-side-bar").classList.remove("show"),document.getElementById("aeon_button_container").classList.remove("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","false")),document.getElementById("aeon-dropdown-mobile").contains(x.target)||(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.remove("show"),document.getElementById("aeon_button_container_mobile").classList.remove("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","false"))})}}else console.log("Cannot find view element")}),document.addEventListener("cdm-item-page:update",function(d){b(d.detail.collectionId,d.detail.itemId).then(t=>e=t),L(d.detail.collectionId,d.detail.itemId).then(t=>o=t),y(d.detail.collectionId,d.detail.itemId).then(t=>s=t),w(d.detail.collectionId,d.detail.itemId).then(t=>r=t),v(d.detail.collectionId,d.detail.itemId).then(t=>C=t)});function b(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+t+"/json").then(m=>m.json()).then(m=>(console.log("Item Info"),console.log(m),m)).catch(m=>console.warn(m))}function L(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+d+"/"+t+"/json").then(m=>m.json()).then(m=>(console.log("Object Info"),console.log(m),m)).catch(m=>console.warn(m))}function y(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+d+"/"+t+"/json").then(m=>m.json()).then(m=>m).catch(m=>console.warn(m))}function w(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+d+"/"+t+"/json").then(m=>m.json()).then(m=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+m.parent+"/json").then(p=>p.json()).then(p=>(console.log("Parent Item Info"),console.log(p),p)).catch(p=>console.warn(p))).catch(m=>console.warn(m))}function v(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+d+"/"+t+"/json").then(m=>m.json()).then(m=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+m.page[0].pageptr+"/json").then(p=>p.json()).then(p=>(console.log("Child Item Info"),console.log(p),p)).catch(p=>console.warn(p))).catch(m=>console.warn(m))}function _(d){var t={};return t.ItemTitle=e[n.ItemTitle],t.ItemSubTitle=e[n.ItemSubTitle],t.ItemDate=e[n.ItemDate],t.DocumentType=e[n.DocumentType],t.ItemAuthor=e[n.ItemAuthor]+", "+e[n.ItemAuthor2]+", "+e[n.ItemAuthor3],t.ItemPlace=e[n.ItemPlace],t.ItemPublisher=e[n.ItemPublisher],t.ItemEdition=e[n.ItemEdition],t.ItemVolume=e[n.ItemVolume],t.ItemIssue=e[n.ItemIssue]+", "+e[n.ItemIssue2],t.ItemPages=e[n.ItemPages],t.Location=e[n.Location],t.SubLocation=e[n.SubLocation],t.PageCount=e[n.PageCount],t.ItemISxN=e[n.ItemISxN],t.ItemCitation=window.location.href,t.ItemNumber=e[n.ItemNumber]+", "+e[n.ItemNumber2],t.EADNumber=e[n.EADNumber],t.ReferenceNumber=e[n.ReferenceNumber],t.CallNumber=e[n.CallNumber],t.Format=e[n.Format],t.ServiceLevel=e[n.ServiceLevel],t.ShippingOption=e[n.ShippingOption],t.ForPublication=e[n.ForPublication],t.ItemInfo1=e[n.ItemInfo1],t.ItemInfo2=e[n.ItemInfo2],t.ItemInfo3=e[n.ItemInfo3],t.ItemInfo4=e[n.ItemInfo4],t.ItemInfo5=e[n.ItemInfo5],s.parent==-1&&o.code!=-2&&C!==null?t.ItemSubTitle=C[n.ItemSubTitle]:s.parent!=-1&&(t.ItemTitle=r[n.ItemTitle],t.ItemDate=r[n.ItemDate],t.DocumentType=r[n.DocumentType],t.ItemAuthor=r[n.ItemAuthor]+", "+r[n.ItemAuthor2]+", "+r[n.ItemAuthor3],t.ItemPlace=r[n.ItemPlace],t.ItemPublisher=r[n.ItemPublisher],t.ItemEdition=r[n.ItemEdition],t.ItemVolume=r[n.ItemVolume],t.ItemIssue=r[n.ItemIssue]+", "+r[n.ItemIssue2],t.ItemPages=r[n.ItemPages],t.Location=r[n.Location],t.SubLocation=r[n.SubLocation],t.PageCount=r[n.PageCount],t.ItemISxN=r[n.ItemISxN],t.ItemCitation=r[n.ItemCitation],t.ItemNumber=r[n.ItemNumber]+", "+r[n.ItemNumber2],t.EADNumber=r[n.EADNumber],t.ReferenceNumber=r[n.ReferenceNumber],t.CallNumber=r[n.CallNumber],t.Format=r[n.Format],t.ServiceLevel=r[n.ServiceLevel],t.ShippingOption=r[n.ShippingOption],t.ForPublication=r[n.ForPublication],t.ItemInfo1=r[n.ItemInfo1],t.ItemInfo2=r[n.ItemInfo2],t.ItemInfo3=r[n.ItemInfo3],t.ItemInfo4=r[n.ItemInfo4],t.ItemInfo5=r[n.ItemInfo5]),t.RequestType=d,console.log("Request"),console.dir(t),t}function N(d){var t=g;d.RequestType==="Loan"?c?t=t+"?Action=10&Form=21":t=t+"?Action=10&Form=20&Value="+h:f?t=t+"?Action=10&Form=23":t=t+"?Action=10&Form=20&Value="+u;var m=[];for(var p in d)d[p]&&d[p]!==""&&m.push(p+"="+encodeURIComponent(d[p]));t=t+"&"+m.join("&"),console.log("Aeon Request -> "+t),window.open(t)}function B(){var d=document.getElementById("aeon-dropdown"),t=document.getElementById("aeon_button_text"),m=document.getElementById("aeon_button_option_loan"),p=document.getElementById("aeon_button_option_copy");t.innerHTML=A,d.onclick=function(){q(!1)},m.innerHTML=E,m.onclick=function(){S("Loan")},p.innerHTML=I,p.onclick=function(){S("Copy")};var P=document.getElementById("aeon-dropdown-mobile"),T=document.getElementById("aeon_button_text_mobile"),x=document.getElementById("aeon_button_option_loan_mobile"),j=document.getElementById("aeon_button_option_copy_mobile");T.innerHTML=A,P.onclick=function(){q(!0)},x.innerHTML=E,x.onclick=function(){S("Loan")},j.innerHTML=I,j.onclick=function(){S("Copy")}}function S(d){var t=_(d);N(t)}function q(d){d?(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.toggle("show"),document.getElementById("aeon_button_container_mobile").classList.toggle("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","true")):(document.getElementById("aeonrequestmenu-side-bar").classList.toggle("show"),document.getElementById("aeon_button_container").classList.toggle("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","true"))}}function U(){"use strict";let g="https://cdmdemo.contentdm.oclc.org/customizations/global/pages/img/";function A(u){return localStorage.getItem(u)}function E(){return fetch("/customizations/global/pages/js/rights.json").then(u=>u.json()).then(u=>u).catch(u=>(console.log("Rights JSON request failed:",u),!1))}function I(u){let n=!1;if(u){let a=document.querySelectorAll("tr.ItemMetadata-metadatarow > td.field-value > span");Array.from(a).forEach(l=>{l.innerText&&u.right.forEach(e=>{e.uri===l.innerText&&(n=e)})})}return n}function c(u){if(u){let n=document.querySelectorAll("tr.ItemMetadata-metadatarow > td.field-value > span");Array.from(n).forEach(a=>{a.innerText&&u.right.forEach(l=>{if(l.uri===a.textContent){let e=document.createElement("div");e.id="right-badge-ui";let o=document.createElement("div");o.style.margin="0.5em 0",o.innerHTML=`<img style="height: 2.2em;" src="${g}${l.button_url.file}"/>`;let s=document.createElement("div");s.style.margin="0.5em 0",s.innerHTML=`${l.name}`;let r=document.createElement("div");r.style.wordBreak="normal",r.innerHTML=`${l.text_en}`,e.append(o,s,r),a.append(e)}})})}}let h=!0,f=[];["cdm-item-page:ready","cdm-item-page:update"].forEach(function(u){document.addEventListener(u,function(n){let a=n.detail.itemId,l=n.detail.collectionId;(h||f.includes(l))&&(document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove(),E().then(e=>{c(e)}))})}),document.addEventListener("cdm-item-page:leave",function(u){let n=u.detail.collectionId;(h||f.includes(n))&&document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove()})}function z(){"use strict";function g(a){return new Promise(function(l,e){let o=document.createElement("script");o.src=a,o.onload=l,o.onerror=e,document.head.appendChild(o)})}let A=window.location.origin?`${window.location.origin}/`:`${window.location.protocol}//${window.location.host}/`;function E(a,l){return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${l}/${a}/json`).then(e=>e.json()).then(e=>{let o=!1;return e.parent===-1?o=a:o=e.parent,o}).then(e=>fetch(`/iiif/info/${l}/${e}/manifest.json`).then(o=>o.status!=200?(console.log("No IIIF manifest exists for this record."),e=!1,e):fetch(`/digital/api/collections/${l}/items/${e}/false`).then(s=>s.json()).then(s=>(s.filename.split(".").pop()==="pdf"&&(console.log("pdf?",s.filename.split(".").pop()),e=!1),e)).catch(s=>console.log("Item API request failed.",s))).catch(o=>(console.log("Manifest request failed.",o),e=!1,e))).catch(function(e){return console.log("GetParent request failed.",e),parent=!1,parent})}let I={getMiradorUrl:function(a,l){return`/digital/custom/mirador?manifest=${`${A}/iiif/info/${l}/${a}/manifest.json`}`},add:function(a,l){let e=document.createElement("div");e.className="btn-group btn-group-default mirador-button";let o=document.createElement("a");o.title="View this item in Mirador",o.className="cdm-btn btn btn-primary",o.href=I.getMiradorUrl(a,l),o.style.paddingTop="5px",o.style.paddingBottom="2px",o.target="_blank",o.innerHTML=' <svg xmlns="http://www.w3.org/2000/svg" height="1.8em" viewBox="0 0 60 55" style="fill: currentColor;"><rect width="18" height="55" /><rect width="18" height="55" transform="translate(42)" /><rect width="18" height="34" transform="translate(21)" /></svg> ',e.appendChild(o),Array.from(document.querySelectorAll(".ItemOptions-itemOptions>.btn-toolbar")).forEach(s=>{s.appendChild(e.cloneNode(!0))})},remove:function(){Array.from(document.querySelectorAll(".mirador-button")).forEach(a=>{a&&a.parentElement&&a.parentElement.removeChild(a)})}},c=function(){let a="mirador";if(!document.getElementById(a)){let l=document.createElement("link");l.id=a,l.rel="stylesheet",l.type="text/css",l.href="/customizations/global/pages/mirador/css/mirador-combined.css",l.media="all",document.head.appendChild(l)}},h=function(){let a={};location.search.split(/\&|\?/g).forEach(function(e){if(e){let o=e.split("="),s=o[0],r=o[1];a[s]=r}});let l={id:"viewer",data:[],buildPath:"/customizations/global/pages/mirador/"};a.manifest&&(l.data.push({manifestUri:a.manifest,location:a.collection||""}),l.windowObjects=[{loadedManifest:a.manifest,canvasID:a.canvas||""}]),Mirador(l)},f=!1,u=["afpl"],n=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",function(a){let l=a.detail.itemId,e=a.detail.collectionId,o=document.querySelector(".field-creato .field-value a");o=o?o.text:null,(f||!u.includes(e)&&!n.includes(o))&&E(l,e).then(function(s){s!==!1&&I.add(s,e)})}),document.addEventListener("cdm-item-page:update",function(a){let l=a.detail.itemId,e=a.detail.collectionId,o=document.querySelector(".field-creato .field-value a");o=o?o.text:null,(f||!u.includes(e)&&!n.includes(o))&&E(l,e).then(function(s){if(s===!1){I.remove();return}else I.remove(),I.add(s,e)})}),document.addEventListener("cdm-item-page:leave",function(a){let l=a.detail.collectionId,e=document.querySelector(".field-creato .field-value a");e=e?e.text:null,(f||!u.includes(l)&&!n.includes(e))&&I.remove()}),document.addEventListener("cdm-custom-page:enter",function(a){a.detail.filename=="mirador"&&g("/customizations/global/pages/js/mirador-cp.js").then(function(){c()})}),document.addEventListener("cdm-custom-page:ready",function(a){a.detail.filename=="mirador"&&g("/customizations/global/pages/mirador/mirador.js").then(function(){h()})})}function $(){"use strict";let g=window.location.origin?window.location.origin+"/":window.location.protocol+"//"+window.location.host,A='<svg height="2em" width="2em" style="margin-bottom:-5px;" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" style="enable-background:new" version="1.1" id="svg2" xml:space="preserve" width="586.95789" height="534.94623" viewBox="0 0 586.95789 534.94622"> <metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs6" /><g style="display:inline" id="g10" transform="matrix(1.3333333,0,0,-1.3333333,42.08939,487.43895)"> <g style="display:inline;" id="layer4"><rect ry="56.48138" transform="scale(1,-1)" y="-354.32922" x="-20.317043" height="378.70969" width="417.71841" id="rect2281" style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:22.5;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" /> </g><g id="g12" transform="scale(0.1)"><path d="M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path14" /><path d="m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path16" /><path d="M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path18" /><path d="m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path20" /><path d="m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path22" /><path d="m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path24" /><path d="m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path26" /></g></g></svg>';function E(a,l){let e={parent:null};return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${l}/${a}/json`).then(function(o){return o.json()}).then(function(o){return o.parent===-1?e.parent=a:e.parent=o.parent,e}).catch(function(o){return console.log("Parent request failed: "+o),!1})}function I(a,l){return fetch(`/iiif/info/${l}/${a.parent}/manifest.json`).then(function(e){return e.status==404?(console.info(`No IIIF manifest exists for this record (id=${a.parent}).`),!1):e.json()}).then(function(e){let o=e;if(!!o.sequences[0].canvases[0]["@id"]){let r=o.sequences[0].canvases,C=[];for(let b=0;b<r.length;b++){let L=r[b]["@id"],w=L.indexOf(l)+l.length+1,v=L.indexOf("/canvas/"),_=L.slice(w,v);b===0&&(a.child=_),C.push(_)}a={...a,allChildren:C}}else a.child=null,a.allChildren=null;return a}).catch(function(e){return console.log("Manifest request failed: "+e),!1})}function c(a,l,e){let o=document.createDocumentFragment(),s=document.createElement("tr");s.classList.add("ItemMetadata-metadatarow",a);let r=document.createElement("td");r.classList.add("ItemMetadata-key","field-label"),r.style.verticalAlign="bottom",r.innerHTML=l;let C=document.createElement("td");C.classList.add("field-value");let b=document.createElement("span");return b.classList.add("field-value-span"),b.appendChild(e),C.appendChild(b),s.appendChild(r),s.appendChild(C),o.appendChild(s),o}let h={insertManifestLink:function(a,l,e,o,s){let r=document.querySelector("div#compoundObjectDescription>div>table>tbody"),C=document.querySelector("div#compoundItemDescription>div>table>tbody"),b=document.querySelector("div#singleItemDescription>div>table>tbody");function L(y,w,v,_,N,B){let S=document.createElement("a");S.target="_blank";let q,d,t,m,p,P,T,x,j,H=document.querySelector(".CompoundItemView-thumbnail");if(H){let D=H.getAttribute("src");P=D.indexOf("/id/")+4,T=D.slice(P),x=T.indexOf("/"),j=T.slice(0,x)}v?y===w&&j===v?(m=y,p=v):(m=w,p=y):(console.log("no child"),m=y,p=y);let R=!1;if(B==="manifest"?(R=!0,q=`${g}iiif/2/${N}:${m}/manifest.json`,S.title="View IIIF Manifest",d="IIIF Manifest",t="iiif-manifest-link"):B==="image"&&_.includes(p)&&(R=!0,q=`${g}iiif/2/${N}:${p}/full/full/0/default.jpg`,S.title="View IIIF Image",d="IIIF Image",t="iiif-image-link"),R)return S.href=q,S.setAttribute("aria-label",S.title),S.innerHTML=A+" "+q,c(t,d,S)}if(!r){let y=L(a,l,e,o,s,"manifest");b.appendChild(y);let w=L(a,l,e,o,s,"image");b.appendChild(w)}if(r){let y=L(a,l,e,o,s,"manifest");r.appendChild(y);let w=L(a,l,e,o,s,"image");C.appendChild(w)}},removeLink:function(){Array.from(document.querySelectorAll(".iiif-manifest-link")).forEach(function(a){a&&a.parentElement&&a.parentElement.removeChild(a)}),Array.from(document.querySelectorAll(".iiif-image-link")).forEach(function(a){a&&a.parentElement&&a.parentElement.removeChild(a)})}},f=!1,u=["afpl"],n=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",function(a){let l=a.detail.itemId,e=a.detail.collectionId,o=document.querySelector(".field-creato .field-value a");o=o?o.text:null,(f||!u.includes(e)&&!n.includes(o))&&E(l,e).then(function(s){s&&I(s,e).then(function(r){if(r)h.insertManifestLink(l,r.parent,r.child,r.allChildren,e);else return})})}),document.addEventListener("cdm-item-page:update",function(a){let l=a.detail.itemId,e=a.detail.collectionId,o=document.querySelector(".field-creato .field-value a");o=o?o.text:null,h.removeLink(),(f||!u.includes(e)&&!n.includes(o))&&E(l,e).then(function(s){s&&I(s,e).then(function(r){if(r)h.insertManifestLink(l,r.parent,r.child,r.allChildren,e);else return})})}),document.addEventListener("cdm-item-page:leave",function(a){let l=a.detail.collectionId,e=document.querySelector(".field-creato .field-value a");e=e?e.text:null,(f||!u.includes(l)&&!n.includes(e))&&h.removeLink()})}document.addEventListener("cdm-home-page:ready",function(){k(),F(),M()});document.addEventListener("cdm-search-page:ready",function(){k(),M()});document.addEventListener("cdm-collection-search-page:ready",function(){k(),M()});document.addEventListener("cdm-advanced-search-page:ready",function(){k(),M()});document.addEventListener("cdm-collection-landing-page:ready",function(){k(),M()});document.addEventListener("cdm-item-page:ready",function(){k(),O(),M()});document.addEventListener("cdm-custom-page:ready",function(){k(),M()});document.addEventListener("cdm-about-page:ready",function(){k(),M()});document.addEventListener("cdm-login-page:ready",function(){k(),M()});document.addEventListener("cdm-notfound-page:ready",function(){k(),M()});document.addEventListener("cdm-saved-items-page:ready",function(){k(),M()});document.addEventListener("cdm-shared-items-page:ready",function(){k(),M()});$();z();U();V();})();
