(()=>{function k(){var p=!1,A=!1,E=!1,I=document.location.search.slice(1).split("&");for(s=0;s<I.length;s++)I[s].startsWith("debugCss")?p=!0:I[s].startsWith("removeCss")?A=!0:I[s].startsWith("removeJs")&&(E=!0);if(p||A){links=document.getElementsByTagName("link");for(var s=0;s<links.length;s++)if(links[s].getAttribute("href")=="/customizations/global//styles.min.css"){if(console.log("Removing local CSS."),links[s].parentNode.removeChild(links[s]),A)break;console.log("Adding CSS from static.");var h="gsuStyle";if(!document.getElementById(h)){var c=document.createElement("link");c.id=h,c.rel="stylesheet",c.href="https://static.library.gsu.edu/contentdm/styles.css",document.head.appendChild(c)}break}}if(E)return;var g="gsuFont";if(!document.getElementById(g)){var c=document.createElement("link");c.id=g,c.rel="stylesheet",c.href="https://fonts.googleapis.com/css?family=Lato&display=swap",document.head.appendChild(c)}var a=document.getElementById("search-input");a&&a.addEventListener("keydown",function(d){d.keyCode===13&&(a.blur(),document.body.focus())});var o="gsuWrapper";if(!document.getElementById(o)){var l=document.querySelector(".CoreLayout-mainWrapperContainer"),e=l.parentNode,n=document.createElement("div");n.className="container",n.setAttribute("id",o),e.insertBefore(n,l),n.appendChild(l)}var m="gsuTitle";if(!document.getElementById(m)){var r=document.getElementById("headerNameDiv");if(r){var C=document.createElement("h2");C.innerHTML='<a href="https://digitalcollections.library.gsu.edu">Digital Collections</a>';var b=document.createElement("h3");b.innerHTML='<a href="https://library.gsu.edu/">Georgia State University Library</a>';var L=document.createElement("div");L.setAttribute("id",m),L.innerHTML=C.outerHTML+b.outerHTML,r.innerHTML=L.outerHTML}}var y="gsuHeader";if(!document.getElementById(y)){var w=document.querySelector(".Header-logoNameContainer"),v=document.querySelector(".Header-logoHolder"),x=document.getElementById("headerNameDiv"),N=document.querySelector(".SimpleSearch-searchBox");if(w&&v&&x&&N){v.classList.add("col-sm-3"),x.classList.add("col-sm-6"),N.classList.add("col-sm-3");var n=document.createElement("div");n.setAttribute("id",y),n.className="row",w.insertBefore(n,v),n.appendChild(v),n.appendChild(x),n.appendChild(N)}let d;(d=document.querySelector(".Header-logoImage"))&&(d.parentNode.href="https://library.gsu.edu/")}let B,S,q;(B=document.querySelector(".ItemView-itemMetadata"))&&((q=document.querySelector(".field-discl"))&&B.prepend(q),(S=document.querySelector(".field-access"))&&B.prepend(S))}function F(){var p=document.querySelectorAll(".Card-cardcontainer.col-sm-6");for(i=0;i<p.length;i++)p[i].classList.remove("col-sm-6"),p[i].classList.add("col-sm-3")}function O(){var p=window.location.href.match(/collection\/([a-zA-Z0-9-_]+)\//i)[1],A=document.querySelector(".field-digcol .field-value"),E=[{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - City Planning Maps",slug:"atlmaps"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Oral Histories",slug:"atlpoh"},{name:"Planning Atlanta, A New City in the Making, 1949 - Aerial Mosaic and Photographs",slug:"atlaerial"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Photographs",slug:"atlphotos"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Planning Publications",slug:"planATLpubs"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Population-Housing Data",slug:"atlphdata"}];if(A&&(A=A.textContent)){var I=E.find(b=>b.name===A);typeof I<"u"&&(p=I.slug)}var s=document.querySelector(".field-identi .field-value span");s=s?s.innerHTML:null,s=s.replace(/<[^>]*>?/gm,"");var h=document.querySelector(".field-georef .field-value span");h=h?h.innerHTML.toLowerCase().replace(/<[^>]*>?/gm,""):null,h=h=="yes";let c=document.querySelector(".ItemUrl-itemUrlLink a");if(c=c?c.href.replace(/^http:\/\//i,"https://"):null,c){console.log("This is an item link page.");let b=[{urlMatch:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php",idMatch:/cachefile=(.+)$/,embedUrl:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php?cachefile=",iframeAttributes:'width="100%" height="700"'},{urlMatch:"https://www.youtube.com/embed/",idMatch:/\/embed\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://youtu.be/",idMatch:/\.be\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://www.youtube.com/watch",idMatch:/v=(.+)&|v=(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/media",idMatch:/\/([\w\d_-]+)$/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/embed",idMatch:/entryId\/([\w\d_-]+)/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://vimeo.com/",idMatch:/vimeo.com\/(.+)$/,embedUrl:"https://player.vimeo.com/video/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'}],L=document.querySelector(".ItemPreview-container"),y=null,w=null;for(let v=0;v<b.length;v++)if(c.startsWith(b[v].urlMatch)){w=c.match(b[v].idMatch);for(let x=1;x<w.length;x++)if(typeof w[x]<"u"&&w[x]){y='<iframe src="'+b[v].embedUrl+w[x]+'" '+b[v].iframeAttributes+"></iframe>";break}break}y&&L&&(L.innerHTML=y)}if(s&&p&&h){console.log("This item is georeferenced with a collection of "+p+" and an id of "+s+".");var g="https://webapps.library.gsu.edu/overlay/"+p+"/"+s+"/",a="https://geo.library.gsu.edu/geoserver/wms/kml?layers="+s,o="https://geo.library.gsu.edu/geotiffs/"+p+"/"+s+"_geo.tif",l=document.createDocumentFragment(),e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" target="_blank" href="'+g+'"><span class="fa fa-map"></span> Map Overlay</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+a+'"><span class="fa fa-globe"></span> Google Earth</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+o+'"><span class="fa fa-download"></span> GeoTiff</a>',l.appendChild(e);var n=document.querySelectorAll(".btn-toolbar");for(i=0;i<n.length;i++)n[i].appendChild(l.cloneNode(!0))}if(s&&p&&p=="atlphdata"){console.log("ATL Population and Housing Data.");var m="https://static.library.gsu.edu/contentdm/atlphdata/excel/"+s+".xls",r="https://static.library.gsu.edu/contentdm/atlphdata/csv/"+s+".zip",l=document.createDocumentFragment(),e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+m+'"><span class="fa fa-file"></span> Excel</a>',l.appendChild(e),e=document.createElement("div"),e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+r+'"><span class="fa fa-file"></span> CSV</a>',l.appendChild(e);var n=document.querySelectorAll(".btn-toolbar");for(i=0;i<n.length;i++)n[i].appendChild(l.cloneNode(!0))}if(s&&p&&(p=="planATLpubs"||p=="atlphdata")){console.log("Adding search link to planATLpubs and atlphdata.");var C="/digital/search/collection/PlanATL/searchterm/"+s,e=document.createElement("div");e.className="btn-group btn-group-default",e.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+C+`"><span class="fa fa-search"></span> View Item's Maps</a>`;var n=document.querySelectorAll(".btn-toolbar");for(i=0;i<n.length;i++)n[i].appendChild(e.cloneNode(!0))}}function M(){if(!("customElements"in window))return;let p=document.createElement("template");p.innerHTML=`
     <style>
       .dialog {
          margin: 0 auto;
          top: 5%;
          max-width: 65ch;
          border: 1px solid hsla(0 0% 0% / 0.5);
          border-radius: 0.5em;
          box-shadow: 0 2.8px 2.2px hsla(0, 0%, 0%, 0.034),
                      0 6.7px 5.3px hsla(0, 0%, 0%, 0.048),
                      0 12.5px 10px hsla(0, 0%, 0%, 0.06),
                      0 22.3px 17.9px hsla(0, 0%, 0%, 0.072),
                      0 41.8px 33.4px hsla(0, 0%, 0%, 0.086),
                      0 100px 80px hsla(0, 0%, 0%, 0.12);
          color: currentColor;
          padding-inline: 1.5em;
          padding-block: 1.125em;
        }

        .dialog__header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          border-bottom: 1px solid lightgray;
        }

        .dialog__header *,
        .dialog__header ::slotted(*) {
          margin-block-start: 0;
        }

        .dialog__close-btn {
          border: none;
          background: transparent;
          color: currentColor;
          cursor: pointer;
        }

        .dialog__content {
          line-height: 1.5;
          margin-block: 1.5rem;
        }

        .dialog__continue-btn {
          padding: 1.25em 2em;
          color: white;
          border: 1px solid hsla(0 0% 0% / 0.125);
          border-radius: var(--btn-radius, none);
          background-color: var(--btn-continue-color, hsl(219, 100%, 33%));
          cursor: pointer;
        }

        a {
          color: hsl(219, 100%, 33%);
        }

        .dialog__footer {
          border-top: 1px solid lightgray;
        }

        .dialog::backdrop {
          background-color: hsla(0 0% 0% / 0.5);
        }

        .close {
          animation: slide-out-up 0.2s ease-out;
        }

        @keyframes slide-out-up {
          to {
            transform: translateY(-100%);
            opacity: 0;
          }
        }
     </style>

      <dialog id="dialog" class="dialog">
        <header class="dialog__header">
        <slot name="title">
          <h2 id="dialog-heading" class="dialog__heading">Potentially Offensive Content</h2>
        </slot>
          <button id="dialog-close" class="dialog__close-btn" aria-label="close dialog" aria-controls="dialog">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" aria-hidden="true" style="pointer-events:none" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10" opacity=".5"/><path stroke-linecap="round" d="m14.5 9.5l-5 5m0-5l5 5"/></g></svg>
          </button>
        </header>
        <section class="dialog__content">
          <slot name="content">
            <p>Some content in our collection may contain graphic images, offensive language, or material that conflicts with strongly held values or beliefs. We provide access to this content to preserve the historical record. We do not endorse the attitudes, prejudices, or behaviors it represents.</p>
            <p>If you are sensitive to this material, please do not proceed.</p>
            <p><button id="dialog-continue" class="dialog__continue-btn" aria-controls="dialog">Continue</button></p>
          </slot>
        </section>
        <footer class="dialog__footer">
          <slot name="footer">
          <p>For more information read our <a id="dialog-readmore" href="/digital/custom/offensive-content">Statement on Potentially Offensive Content</a>.</p>
          </slot>
        </footer>
      </dialog>
 `;class A extends HTMLElement{#e=!1;#t=0;constructor(){super(),this.root=this.attachShadow({mode:"closed"})}connectedCallback(){if(this.#e||!this.showAgain())return;this.root.append(p.content.cloneNode(!0));let s=this.root.querySelector("#dialog");s.showModal(),s.addEventListener("click",this.handleCloseModal.bind(this)),this.#e=!0}static get observedAttributes(){return["hide-for-days"]}attributeChangedCallback(s,h,c){s==="hide-for-days"&&(this.#t=Number(c))}showAgain(){let s=!0,h=new Date,c=window.localStorage.getItem("hideUntil");if(c){let g=new Date(c);s=h>g}return s}handleCloseModal(s){if(!s.target.matches("#dialog-close, #dialog-continue, #dialog-readmore"))return;let c=s.target.closest("dialog"),g=new Date;g.setDate(g.getDate()+this.#t),window.localStorage.setItem("hideUntil",g.toString()),c.classList.add("close"),window.setTimeout(()=>{c.close()},150)}}customElements.get("notice-dialog")||customElements.define("notice-dialog",A);let E=document.createElement("notice-dialog");E.setAttribute("hide-for-days",7),document.body.append(E)}function U(){var p="https://gsu.aeon.atlas-sys.com/logon",A="Request Item",E="Request in Reading Room",I="Digital Copy/Licensing",s=!1,h="GenericRequestManuscript",c=!1,g="GenericRequestManuscriptPhotodup",a={ItemTitle:"collec",ItemSubTitle:"title",ItemDate:"date",DocumentType:"",ItemAuthor:"creato",ItemAuthor2:"interv",ItemAuthor3:"photog",ItemPlace:"",ItemPublisher:"",ItemEdition:"",ItemVolume:"box",ItemIssue:"folder",ItemIssue2:"file",ItemPages:"",Location:"curato",SubLocation:"",PageCount:"",ItemISxN:"",ItemCitation:"",ItemNumber:"identi",ItemNumber2:"arrang",EADNumber:"",ReferenceNumber:"",CallNumber:"call",Format:"sourca",ServiceLevel:"",ShippingOption:"",ForPublication:"",ItemInfo1:"righth",ItemInfo2:"note",ItemInfo3:"",ItemInfo4:"",ItemInfo5:""},o=!1,l=null,e=null,n=null,m=null,r=null,C=null;document.addEventListener("cdm-item-page:ready",function(d){if(document.getElementById("singleItemDescription")?l="single item":document.getElementById("compoundItemDescription")&&(l="compound object"),b(d.detail.collectionId,d.detail.itemId).then(_=>e=_),L(d.detail.collectionId,d.detail.itemId).then(_=>n=_),y(d.detail.collectionId,d.detail.itemId).then(_=>m=_),w(d.detail.collectionId,d.detail.itemId).then(_=>r=_),v(d.detail.collectionId,d.detail.itemId).then(_=>r=_),l&&(l==="single item"||l==="compound object")){if(document.getElementsByClassName("btn-toolbar")){var t=document.getElementsByClassName("btn-toolbar"),u='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+l+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown-mobile" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text_mobile" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar-mobile" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan_mobile" class="aeon_button_option spacePad5" iopt="Loan">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy_mobile" class="aeon_button_option spacePad5" iopt="Copy">Request Copy</a></li></ul>',f=document.createElement("div");f.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),f.setAttribute("id","aeon_button_container_mobile"),f.innerHTML=u,t[0].appendChild(f);var P='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+l+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan" class="aeon_button_option spacePad5" iopt="Loan" style="cursor:pointer">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy" class="aeon_button_option spacePad5" iopt="Copy" style="cursor:pointer">Request Copy</a></li></ul>',T=document.createElement("div");T.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),T.setAttribute("id","aeon_button_container"),T.innerHTML=P,t[1].appendChild(T),B(),window.addEventListener("click",function(_){document.getElementById("aeon-dropdown").contains(_.target)||(document.getElementById("aeonrequestmenu-side-bar").classList.remove("show"),document.getElementById("aeon_button_container").classList.remove("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","false")),document.getElementById("aeon-dropdown-mobile").contains(_.target)||(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.remove("show"),document.getElementById("aeon_button_container_mobile").classList.remove("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","false"))})}}else console.log("Cannot find view element")}),document.addEventListener("cdm-item-page:update",function(d){b(d.detail.collectionId,d.detail.itemId).then(t=>e=t),L(d.detail.collectionId,d.detail.itemId).then(t=>n=t),y(d.detail.collectionId,d.detail.itemId).then(t=>m=t),w(d.detail.collectionId,d.detail.itemId).then(t=>r=t),v(d.detail.collectionId,d.detail.itemId).then(t=>C=t)});function b(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+t+"/json").then(u=>u.json()).then(u=>(console.log("Item Info"),console.log(u),u)).catch(u=>console.warn(u))}function L(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+d+"/"+t+"/json").then(u=>u.json()).then(u=>(console.log("Object Info"),console.log(u),u)).catch(u=>console.warn(u))}function y(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+d+"/"+t+"/json").then(u=>u.json()).then(u=>u).catch(u=>console.warn(u))}function w(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+d+"/"+t+"/json").then(u=>u.json()).then(u=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+u.parent+"/json").then(f=>f.json()).then(f=>(console.log("Parent Item Info"),console.log(f),f)).catch(f=>console.warn(f))).catch(u=>console.warn(u))}function v(d,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+d+"/"+t+"/json").then(u=>u.json()).then(u=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+d+"/"+u.page[0].pageptr+"/json").then(f=>f.json()).then(f=>(console.log("Child Item Info"),console.log(f),f)).catch(f=>console.warn(f))).catch(u=>console.warn(u))}function x(d){var t={};return t.ItemTitle=e[a.ItemTitle],t.ItemSubTitle=e[a.ItemSubTitle],t.ItemDate=e[a.ItemDate],t.DocumentType=e[a.DocumentType],t.ItemAuthor=e[a.ItemAuthor]+", "+e[a.ItemAuthor2]+", "+e[a.ItemAuthor3],t.ItemPlace=e[a.ItemPlace],t.ItemPublisher=e[a.ItemPublisher],t.ItemEdition=e[a.ItemEdition],t.ItemVolume=e[a.ItemVolume],t.ItemIssue=e[a.ItemIssue]+", "+e[a.ItemIssue2],t.ItemPages=e[a.ItemPages],t.Location=e[a.Location],t.SubLocation=e[a.SubLocation],t.PageCount=e[a.PageCount],t.ItemISxN=e[a.ItemISxN],t.ItemCitation=window.location.href,t.ItemNumber=e[a.ItemNumber]+", "+e[a.ItemNumber2],t.EADNumber=e[a.EADNumber],t.ReferenceNumber=e[a.ReferenceNumber],t.CallNumber=e[a.CallNumber],t.Format=e[a.Format],t.ServiceLevel=e[a.ServiceLevel],t.ShippingOption=e[a.ShippingOption],t.ForPublication=e[a.ForPublication],t.ItemInfo1=e[a.ItemInfo1],t.ItemInfo2=e[a.ItemInfo2],t.ItemInfo3=e[a.ItemInfo3],t.ItemInfo4=e[a.ItemInfo4],t.ItemInfo5=e[a.ItemInfo5],m.parent==-1&&n.code!=-2&&C!==null?t.ItemSubTitle=C[a.ItemSubTitle]:m.parent!=-1&&(t.ItemTitle=r[a.ItemTitle],t.ItemDate=r[a.ItemDate],t.DocumentType=r[a.DocumentType],t.ItemAuthor=r[a.ItemAuthor]+", "+r[a.ItemAuthor2]+", "+r[a.ItemAuthor3],t.ItemPlace=r[a.ItemPlace],t.ItemPublisher=r[a.ItemPublisher],t.ItemEdition=r[a.ItemEdition],t.ItemVolume=r[a.ItemVolume],t.ItemIssue=r[a.ItemIssue]+", "+r[a.ItemIssue2],t.ItemPages=r[a.ItemPages],t.Location=r[a.Location],t.SubLocation=r[a.SubLocation],t.PageCount=r[a.PageCount],t.ItemISxN=r[a.ItemISxN],t.ItemCitation=r[a.ItemCitation],t.ItemNumber=r[a.ItemNumber]+", "+r[a.ItemNumber2],t.EADNumber=r[a.EADNumber],t.ReferenceNumber=r[a.ReferenceNumber],t.CallNumber=r[a.CallNumber],t.Format=r[a.Format],t.ServiceLevel=r[a.ServiceLevel],t.ShippingOption=r[a.ShippingOption],t.ForPublication=r[a.ForPublication],t.ItemInfo1=r[a.ItemInfo1],t.ItemInfo2=r[a.ItemInfo2],t.ItemInfo3=r[a.ItemInfo3],t.ItemInfo4=r[a.ItemInfo4],t.ItemInfo5=r[a.ItemInfo5]),t.RequestType=d,console.log("Request"),console.dir(t),t}function N(d){var t=p;d.RequestType==="Loan"?s?t=t+"?Action=10&Form=21":t=t+"?Action=10&Form=20&Value="+h:c?t=t+"?Action=10&Form=23":t=t+"?Action=10&Form=20&Value="+g;var u=[];for(var f in d)d[f]&&d[f]!==""&&u.push(f+"="+encodeURIComponent(d[f]));t=t+"&"+u.join("&"),console.log("Aeon Request -> "+t),window.open(t)}function B(){var d=document.getElementById("aeon-dropdown"),t=document.getElementById("aeon_button_text"),u=document.getElementById("aeon_button_option_loan"),f=document.getElementById("aeon_button_option_copy");t.innerHTML=A,d.onclick=function(){q(!1)},u.innerHTML=E,u.onclick=function(){S("Loan")},f.innerHTML=I,f.onclick=function(){S("Copy")};var P=document.getElementById("aeon-dropdown-mobile"),T=document.getElementById("aeon_button_text_mobile"),_=document.getElementById("aeon_button_option_loan_mobile"),j=document.getElementById("aeon_button_option_copy_mobile");T.innerHTML=A,P.onclick=function(){q(!0)},_.innerHTML=E,_.onclick=function(){S("Loan")},j.innerHTML=I,j.onclick=function(){S("Copy")}}function S(d){var t=x(d);N(t)}function q(d){d?(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.toggle("show"),document.getElementById("aeon_button_container_mobile").classList.toggle("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","true")):(document.getElementById("aeonrequestmenu-side-bar").classList.toggle("show"),document.getElementById("aeon_button_container").classList.toggle("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","true"))}}function z(){"use strict";let p="https://cdmdemo.contentdm.oclc.org/customizations/global/pages/img/",A="rightsb";function E(){return fetch("/customizations/global/pages/js/rights.json").then(c=>c.json()).then(c=>c).catch(c=>(console.log("Rights JSON request failed:",c),!1))}function I(c){if(c){let g=document.querySelectorAll("tr.ItemMetadata-metadatarow > td.field-value > span");Array.from(g).forEach(a=>{if(a.textContent){let o;localStorage.getItem("cdm_selected_language")?o=localStorage.getItem("cdm_selected_language"):o="en-US",c.right.forEach(l=>{if(l.uri===a.textContent){let e=document.createElement("div");e.id="right-badge-ui";let n=document.createElement("div");n.style.margin="0.5em 0",n.innerHTML=`<img style="height: 2.2em;" src="${p}${l.button_url.file}"/>`;let m=document.createElement("div");m.style.margin="0.5em 0",m.innerHTML=`${l.name[o]}`;let r=document.createElement("div");r.style.wordBreak="normal",r.innerHTML=`${l.text[o]}`,e.append(n,m,r),a.append(e)}})}})}}let s=!0,h=["rights"];["cdm-item-page:ready","cdm-item-page:update"].forEach(function(c){document.addEventListener(c,function(g){let a=g.detail.itemId,o=g.detail.collectionId;(s||h.includes(o))&&(document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove(),E().then(l=>{I(l)}))})}),document.addEventListener("cdm-item-page:leave",function(c){let g=c.detail.collectionId;(s||h.includes(g))&&document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove()})}function V(){"use strict";function p(o){return new Promise(function(l,e){let n=document.createElement("script");n.src=o,n.onload=l,n.onerror=e,document.head.appendChild(n)})}let A=window.location.origin?`${window.location.origin}/`:`${window.location.protocol}//${window.location.host}/`;function E(o,l){return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${l}/${o}/json`).then(e=>e.json()).then(e=>{let n=!1;return e.parent===-1?n=o:n=e.parent,n}).then(e=>fetch(`/iiif/info/${l}/${e}/manifest.json`).then(n=>n.status!=200?(console.log("No IIIF manifest exists for this record."),e=!1,e):fetch(`/digital/api/collections/${l}/items/${e}/false`).then(m=>m.json()).then(m=>(m.filename.split(".").pop()==="pdf"&&(console.log("pdf?",m.filename.split(".").pop()),e=!1),e)).catch(m=>console.log("Item API request failed.",m))).catch(n=>(console.log("Manifest request failed.",n),e=!1,e))).catch(function(e){return console.log("GetParent request failed.",e),parent=!1,parent})}let I={getMiradorUrl:function(o,l){return`/digital/custom/mirador?manifest=${`${A}/iiif/info/${l}/${o}/manifest.json`}`},add:function(o,l){let e=document.createElement("div");e.className="btn-group btn-group-default mirador-button";let n=document.createElement("a");n.title="View this item in Mirador",n.className="cdm-btn btn btn-primary",n.href=I.getMiradorUrl(o,l),n.style.paddingTop="5px",n.style.paddingBottom="2px",n.target="_blank",n.innerHTML=' <svg xmlns="http://www.w3.org/2000/svg" height="1.8em" viewBox="0 0 60 55" style="fill: currentColor;"><rect width="18" height="55" /><rect width="18" height="55" transform="translate(42)" /><rect width="18" height="34" transform="translate(21)" /></svg> ',e.appendChild(n),Array.from(document.querySelectorAll(".ItemOptions-itemOptions>.btn-toolbar")).forEach(m=>{m.appendChild(e.cloneNode(!0))})},remove:function(){Array.from(document.querySelectorAll(".mirador-button")).forEach(o=>{o&&o.parentElement&&o.parentElement.removeChild(o)})}},s=function(){let o="mirador";if(!document.getElementById(o)){let l=document.createElement("link");l.id=o,l.rel="stylesheet",l.type="text/css",l.href="/customizations/global/pages/mirador/css/mirador-combined.css",l.media="all",document.head.appendChild(l)}},h=function(){let o={};location.search.split(/\&|\?/g).forEach(function(e){if(e){let n=e.split("="),m=n[0],r=n[1];o[m]=r}});let l={id:"viewer",data:[],buildPath:"/customizations/global/pages/mirador/"};o.manifest&&(l.data.push({manifestUri:o.manifest,location:o.collection||""}),l.windowObjects=[{loadedManifest:o.manifest,canvasID:o.canvas||""}]),Mirador(l)},c=!1,g=["afpl"],a=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",function(o){let l=o.detail.itemId,e=o.detail.collectionId,n=document.querySelector(".field-creato .field-value a");n=n?n.text:null,(c||!g.includes(e)&&!a.includes(n))&&E(l,e).then(function(m){m!==!1&&I.add(m,e)})}),document.addEventListener("cdm-item-page:update",function(o){let l=o.detail.itemId,e=o.detail.collectionId,n=document.querySelector(".field-creato .field-value a");n=n?n.text:null,(c||!g.includes(e)&&!a.includes(n))&&E(l,e).then(function(m){if(m===!1){I.remove();return}else I.remove(),I.add(m,e)})}),document.addEventListener("cdm-item-page:leave",function(o){let l=o.detail.collectionId,e=document.querySelector(".field-creato .field-value a");e=e?e.text:null,(c||!g.includes(l)&&!a.includes(e))&&I.remove()}),document.addEventListener("cdm-custom-page:enter",function(o){o.detail.filename=="mirador"&&p("/customizations/global/pages/js/mirador-cp.js").then(function(){s()})}),document.addEventListener("cdm-custom-page:ready",function(o){o.detail.filename=="mirador"&&p("/customizations/global/pages/mirador/mirador.js").then(function(){h()})})}function $(){"use strict";let p=window.location.origin?window.location.origin+"/":window.location.protocol+"//"+window.location.host,A='<svg height="2em" width="2em" style="margin-bottom:-5px;" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" style="enable-background:new" version="1.1" id="svg2" xml:space="preserve" width="586.95789" height="534.94623" viewBox="0 0 586.95789 534.94622"> <metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs6" /><g style="display:inline" id="g10" transform="matrix(1.3333333,0,0,-1.3333333,42.08939,487.43895)"> <g style="display:inline;" id="layer4"><rect ry="56.48138" transform="scale(1,-1)" y="-354.32922" x="-20.317043" height="378.70969" width="417.71841" id="rect2281" style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:22.5;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" /> </g><g id="g12" transform="scale(0.1)"><path d="M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path14" /><path d="m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path16" /><path d="M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path18" /><path d="m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path20" /><path d="m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path22" /><path d="m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path24" /><path d="m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path26" /></g></g></svg>';function E(o,l){let e={parent:null};return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${l}/${o}/json`).then(function(n){return n.json()}).then(function(n){return n.parent===-1?e.parent=o:e.parent=n.parent,e}).catch(function(n){return console.log("Parent request failed: "+n),!1})}function I(o,l){return fetch(`/iiif/info/${l}/${o.parent}/manifest.json`).then(function(e){return e.status==404?(console.info(`No IIIF manifest exists for this record (id=${o.parent}).`),!1):e.json()}).then(function(e){let n=e;if(!!n.sequences[0].canvases[0]["@id"]){let r=n.sequences[0].canvases,C=[];for(let b=0;b<r.length;b++){let L=r[b]["@id"],w=L.indexOf(l)+l.length+1,v=L.indexOf("/canvas/"),x=L.slice(w,v);b===0&&(o.child=x),C.push(x)}o={...o,allChildren:C}}else o.child=null,o.allChildren=null;return o}).catch(function(e){return console.log("Manifest request failed: "+e),!1})}function s(o,l,e){let n=document.createDocumentFragment(),m=document.createElement("tr");m.classList.add("ItemMetadata-metadatarow",o);let r=document.createElement("td");r.classList.add("ItemMetadata-key","field-label"),r.style.verticalAlign="bottom",r.innerHTML=l;let C=document.createElement("td");C.classList.add("field-value");let b=document.createElement("span");return b.classList.add("field-value-span"),b.appendChild(e),C.appendChild(b),m.appendChild(r),m.appendChild(C),n.appendChild(m),n}let h={insertManifestLink:function(o,l,e,n,m){let r=document.querySelector("div#compoundObjectDescription>div>table>tbody"),C=document.querySelector("div#compoundItemDescription>div>table>tbody"),b=document.querySelector("div#singleItemDescription>div>table>tbody");function L(y,w,v,x,N,B){let S=document.createElement("a");S.target="_blank";let q,d,t,u,f,P,T,_,j,H=document.querySelector(".CompoundItemView-thumbnail");if(H){let D=H.getAttribute("src");P=D.indexOf("/id/")+4,T=D.slice(P),_=T.indexOf("/"),j=T.slice(0,_)}v?y===w&&j===v?(u=y,f=v):(u=w,f=y):(console.log("no child"),u=y,f=y);let R=!1;if(B==="manifest"?(R=!0,q=`${p}iiif/2/${N}:${u}/manifest.json`,S.title="View IIIF Manifest",d="IIIF Manifest",t="iiif-manifest-link"):B==="image"&&x.includes(f)&&(R=!0,q=`${p}iiif/2/${N}:${f}/full/full/0/default.jpg`,S.title="View IIIF Image",d="IIIF Image",t="iiif-image-link"),R)return S.href=q,S.setAttribute("aria-label",S.title),S.innerHTML=A+" "+q,s(t,d,S)}if(!r){let y=L(o,l,e,n,m,"manifest");b.appendChild(y);let w=L(o,l,e,n,m,"image");b.appendChild(w)}if(r){let y=L(o,l,e,n,m,"manifest");r.appendChild(y);let w=L(o,l,e,n,m,"image");C.appendChild(w)}},removeLink:function(){Array.from(document.querySelectorAll(".iiif-manifest-link")).forEach(function(o){o&&o.parentElement&&o.parentElement.removeChild(o)}),Array.from(document.querySelectorAll(".iiif-image-link")).forEach(function(o){o&&o.parentElement&&o.parentElement.removeChild(o)})}},c=!1,g=["afpl"],a=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",function(o){let l=o.detail.itemId,e=o.detail.collectionId,n=document.querySelector(".field-creato .field-value a");n=n?n.text:null,(c||!g.includes(e)&&!a.includes(n))&&E(l,e).then(function(m){m&&I(m,e).then(function(r){if(r)h.insertManifestLink(l,r.parent,r.child,r.allChildren,e);else return})})}),document.addEventListener("cdm-item-page:update",function(o){let l=o.detail.itemId,e=o.detail.collectionId,n=document.querySelector(".field-creato .field-value a");n=n?n.text:null,h.removeLink(),(c||!g.includes(e)&&!a.includes(n))&&E(l,e).then(function(m){m&&I(m,e).then(function(r){if(r)h.insertManifestLink(l,r.parent,r.child,r.allChildren,e);else return})})}),document.addEventListener("cdm-item-page:leave",function(o){let l=o.detail.collectionId,e=document.querySelector(".field-creato .field-value a");e=e?e.text:null,(c||!g.includes(l)&&!a.includes(e))&&h.removeLink()})}document.addEventListener("cdm-home-page:ready",function(){k(),F(),M()});document.addEventListener("cdm-search-page:ready",function(){k(),M()});document.addEventListener("cdm-collection-search-page:ready",function(){k(),M()});document.addEventListener("cdm-advanced-search-page:ready",function(){k(),M()});document.addEventListener("cdm-collection-landing-page:ready",function(){k(),M()});document.addEventListener("cdm-item-page:ready",function(){k(),O(),M()});document.addEventListener("cdm-custom-page:ready",function(){k(),M()});document.addEventListener("cdm-about-page:ready",function(){k(),M()});document.addEventListener("cdm-login-page:ready",function(){k(),M()});document.addEventListener("cdm-notfound-page:ready",function(){k(),M()});document.addEventListener("cdm-saved-items-page:ready",function(){k(),M()});document.addEventListener("cdm-shared-items-page:ready",function(){k(),M()});$();V();z();U();})();
