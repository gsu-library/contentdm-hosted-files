(()=>{function D(){var _="https://gsu.aeon.atlas-sys.com/logon",L="Request Item",A="Request in Reading Room",p="Digital Copy/Licensing",C=!1,v="GenericRequestManuscript",I=!1,u="GenericRequestManuscriptPhotodup",n={ItemTitle:"collec",ItemSubTitle:"title",ItemDate:"date",DocumentType:"",ItemAuthor:"creato",ItemAuthor2:"interv",ItemAuthor3:"photog",ItemPlace:"",ItemPublisher:"",ItemEdition:"",ItemVolume:"box",ItemIssue:"folder",ItemIssue2:"file",ItemPages:"",Location:"curato",SubLocation:"",PageCount:"",ItemISxN:"",ItemCitation:"",ItemNumber:"identi",ItemNumber2:"arrang",EADNumber:"",ReferenceNumber:"",CallNumber:"call",Format:"sourca",ServiceLevel:"",ShippingOption:"",ForPublication:"",ItemInfo1:"righth",ItemInfo2:"note",ItemInfo3:"",ItemInfo4:"",ItemInfo5:""},o=!1,a=null,e=null,i=null,s=null,l=null,b=null;document.addEventListener("cdm-item-page:ready",function(r){if(document.getElementById("singleItemDescription")?a="single item":document.getElementById("compoundItemDescription")&&(a="compound object"),f(r.detail.collectionId,r.detail.itemId).then(m=>e=m),w(r.detail.collectionId,r.detail.itemId).then(m=>i=m),g(r.detail.collectionId,r.detail.itemId).then(m=>s=m),y(r.detail.collectionId,r.detail.itemId).then(m=>l=m),E(r.detail.collectionId,r.detail.itemId).then(m=>l=m),a&&(a==="single item"||a==="compound object")){if(document.getElementsByClassName("btn-toolbar")){var t=document.getElementsByClassName("btn-toolbar"),d='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+a+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown-mobile" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text_mobile" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar-mobile" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan_mobile" class="aeon_button_option spacePad5" iopt="Loan">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy_mobile" class="aeon_button_option spacePad5" iopt="Copy">Request Copy</a></li></ul>',c=document.createElement("div");c.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),c.setAttribute("id","aeon_button_container_mobile"),c.innerHTML=d,t[0].appendChild(c);var k='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+a+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan" class="aeon_button_option spacePad5" iopt="Loan" style="cursor:pointer">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy" class="aeon_button_option spacePad5" iopt="Copy" style="cursor:pointer">Request Copy</a></li></ul>',x=document.createElement("div");x.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),x.setAttribute("id","aeon_button_container"),x.innerHTML=k,t[1].appendChild(x),M(),window.addEventListener("click",function(m){document.getElementById("aeon-dropdown").contains(m.target)||(document.getElementById("aeonrequestmenu-side-bar").classList.remove("show"),document.getElementById("aeon_button_container").classList.remove("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","false")),document.getElementById("aeon-dropdown-mobile").contains(m.target)||(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.remove("show"),document.getElementById("aeon_button_container_mobile").classList.remove("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","false"))})}}else console.log("Cannot find view element")}),document.addEventListener("cdm-item-page:update",function(r){f(r.detail.collectionId,r.detail.itemId).then(t=>e=t),w(r.detail.collectionId,r.detail.itemId).then(t=>i=t),g(r.detail.collectionId,r.detail.itemId).then(t=>s=t),y(r.detail.collectionId,r.detail.itemId).then(t=>l=t),E(r.detail.collectionId,r.detail.itemId).then(t=>b=t)});function f(r,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+r+"/"+t+"/json").then(d=>d.json()).then(d=>(console.log("Item Info"),console.log(d),d)).catch(d=>console.warn(d))}function w(r,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+r+"/"+t+"/json").then(d=>d.json()).then(d=>(console.log("Object Info"),console.log(d),d)).catch(d=>console.warn(d))}function g(r,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+r+"/"+t+"/json").then(d=>d.json()).then(d=>d).catch(d=>console.warn(d))}function y(r,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+r+"/"+t+"/json").then(d=>d.json()).then(d=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+r+"/"+d.parent+"/json").then(c=>c.json()).then(c=>(console.log("Parent Item Info"),console.log(c),c)).catch(c=>console.warn(c))).catch(d=>console.warn(d))}function E(r,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+r+"/"+t+"/json").then(d=>d.json()).then(d=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+r+"/"+d.page[0].pageptr+"/json").then(c=>c.json()).then(c=>(console.log("Child Item Info"),console.log(c),c)).catch(c=>console.warn(c))).catch(d=>console.warn(d))}function q(r){var t={};return t.ItemTitle=e[n.ItemTitle],t.ItemSubTitle=e[n.ItemSubTitle],t.ItemDate=e[n.ItemDate],t.DocumentType=e[n.DocumentType],t.ItemAuthor=e[n.ItemAuthor]+", "+e[n.ItemAuthor2]+", "+e[n.ItemAuthor3],t.ItemPlace=e[n.ItemPlace],t.ItemPublisher=e[n.ItemPublisher],t.ItemEdition=e[n.ItemEdition],t.ItemVolume=e[n.ItemVolume],t.ItemIssue=e[n.ItemIssue]+", "+e[n.ItemIssue2],t.ItemPages=e[n.ItemPages],t.Location=e[n.Location],t.SubLocation=e[n.SubLocation],t.PageCount=e[n.PageCount],t.ItemISxN=e[n.ItemISxN],t.ItemCitation=window.location.href,t.ItemNumber=e[n.ItemNumber]+", "+e[n.ItemNumber2],t.EADNumber=e[n.EADNumber],t.ReferenceNumber=e[n.ReferenceNumber],t.CallNumber=e[n.CallNumber],t.Format=e[n.Format],t.ServiceLevel=e[n.ServiceLevel],t.ShippingOption=e[n.ShippingOption],t.ForPublication=e[n.ForPublication],t.ItemInfo1=e[n.ItemInfo1],t.ItemInfo2=e[n.ItemInfo2],t.ItemInfo3=e[n.ItemInfo3],t.ItemInfo4=e[n.ItemInfo4],t.ItemInfo5=e[n.ItemInfo5],s.parent==-1&&i.code!=-2&&b!==null?t.ItemSubTitle=b[n.ItemSubTitle]:s.parent!=-1&&(t.ItemTitle=l[n.ItemTitle],t.ItemDate=l[n.ItemDate],t.DocumentType=l[n.DocumentType],t.ItemAuthor=l[n.ItemAuthor]+", "+l[n.ItemAuthor2]+", "+l[n.ItemAuthor3],t.ItemPlace=l[n.ItemPlace],t.ItemPublisher=l[n.ItemPublisher],t.ItemEdition=l[n.ItemEdition],t.ItemVolume=l[n.ItemVolume],t.ItemIssue=l[n.ItemIssue]+", "+l[n.ItemIssue2],t.ItemPages=l[n.ItemPages],t.Location=l[n.Location],t.SubLocation=l[n.SubLocation],t.PageCount=l[n.PageCount],t.ItemISxN=l[n.ItemISxN],t.ItemCitation=l[n.ItemCitation],t.ItemNumber=l[n.ItemNumber]+", "+l[n.ItemNumber2],t.EADNumber=l[n.EADNumber],t.ReferenceNumber=l[n.ReferenceNumber],t.CallNumber=l[n.CallNumber],t.Format=l[n.Format],t.ServiceLevel=l[n.ServiceLevel],t.ShippingOption=l[n.ShippingOption],t.ForPublication=l[n.ForPublication],t.ItemInfo1=l[n.ItemInfo1],t.ItemInfo2=l[n.ItemInfo2],t.ItemInfo3=l[n.ItemInfo3],t.ItemInfo4=l[n.ItemInfo4],t.ItemInfo5=l[n.ItemInfo5]),t.RequestType=r,console.log("Request"),console.dir(t),t}function R(r){var t=_;r.RequestType==="Loan"?C?t=t+"?Action=10&Form=21":t=t+"?Action=10&Form=20&Value="+v:I?t=t+"?Action=10&Form=23":t=t+"?Action=10&Form=20&Value="+u;var d=[];for(var c in r)r[c]&&r[c]!==""&&d.push(c+"="+encodeURIComponent(r[c]));t=t+"&"+d.join("&"),console.log("Aeon Request -> "+t),window.open(t)}function M(){var r=document.getElementById("aeon-dropdown"),t=document.getElementById("aeon_button_text"),d=document.getElementById("aeon_button_option_loan"),c=document.getElementById("aeon_button_option_copy");t.innerHTML=L,r.onclick=function(){S(!1)},d.innerHTML=A,d.onclick=function(){h("Loan")},c.innerHTML=p,c.onclick=function(){h("Copy")};var k=document.getElementById("aeon-dropdown-mobile"),x=document.getElementById("aeon_button_text_mobile"),m=document.getElementById("aeon_button_option_loan_mobile"),T=document.getElementById("aeon_button_option_copy_mobile");x.innerHTML=L,k.onclick=function(){S(!0)},m.innerHTML=A,m.onclick=function(){h("Loan")},T.innerHTML=p,T.onclick=function(){h("Copy")}}function h(r){var t=q(r);R(t)}function S(r){r?(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.toggle("show"),document.getElementById("aeon_button_container_mobile").classList.toggle("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","true")):(document.getElementById("aeonrequestmenu-side-bar").classList.toggle("show"),document.getElementById("aeon_button_container").classList.toggle("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","true"))}}function F(){"use strict";let _="https://cdmdemo.contentdm.oclc.org/customizations/global/pages/img/";function L(u){return localStorage.getItem(u)}function A(){return fetch("/customizations/global/pages/js/rights.json").then(u=>u.json()).then(u=>u).catch(u=>(console.log("Rights JSON request failed:",u),!1))}function p(u){let n=!1;if(u){let o=document.querySelectorAll("tr.ItemMetadata-metadatarow > td.field-value > span");Array.from(o).forEach(a=>{a.innerText&&u.right.forEach(e=>{e.uri===a.innerText&&(n=e)})})}return n}function C(u){if(u){let n=document.querySelectorAll("tr.ItemMetadata-metadatarow > td.field-value > span");Array.from(n).forEach(o=>{o.innerText&&u.right.forEach(a=>{if(a.uri===o.textContent){let e=document.createElement("div");e.id="right-badge-ui";let i=document.createElement("div");i.style.margin="0.5em 0",i.innerHTML=`<img style="height: 2.2em;" src="${_}${a.button_url.file}"/>`;let s=document.createElement("div");s.style.margin="0.5em 0",s.innerHTML=`${a.name}`;let l=document.createElement("div");l.style.wordBreak="normal",l.innerHTML=`${a.text_en}`,e.append(i,s,l),o.append(e)}})})}}let v=!0,I=[];["cdm-item-page:ready","cdm-item-page:update"].forEach(function(u){document.addEventListener(u,function(n){let o=n.detail.itemId,a=n.detail.collectionId;(v||I.includes(a))&&(document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove(),A().then(e=>{C(e)}))})}),document.addEventListener("cdm-item-page:leave",function(u){let n=u.detail.collectionId;(v||I.includes(n))&&document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove()})}function N(){"use strict";function _(o){return new Promise(function(a,e){let i=document.createElement("script");i.src=o,i.onload=a,i.onerror=e,document.head.appendChild(i)})}let L=window.location.origin?`${window.location.origin}/`:`${window.location.protocol}//${window.location.host}/`;function A(o,a){return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${a}/${o}/json`).then(e=>e.json()).then(e=>{let i=!1;return e.parent===-1?i=o:i=e.parent,i}).then(e=>fetch(`/iiif/info/${a}/${e}/manifest.json`).then(i=>i.status!=200?(console.log("No IIIF manifest exists for this record."),e=!1,e):fetch(`/digital/api/collections/${a}/items/${e}/false`).then(s=>s.json()).then(s=>(s.filename.split(".").pop()==="pdf"&&(console.log("pdf?",s.filename.split(".").pop()),e=!1),e)).catch(s=>console.log("Item API request failed.",s))).catch(i=>(console.log("Manifest request failed.",i),e=!1,e))).catch(function(e){return console.log("GetParent request failed.",e),parent=!1,parent})}let p={getMiradorUrl:function(o,a){return`/digital/custom/mirador?manifest=${`${L}/iiif/info/${a}/${o}/manifest.json`}`},add:function(o,a){let e=document.createElement("div");e.className="btn-group btn-group-default mirador-button";let i=document.createElement("a");i.title="View this item in Mirador",i.className="cdm-btn btn btn-primary",i.href=p.getMiradorUrl(o,a),i.style.paddingTop="5px",i.style.paddingBottom="2px",i.target="_blank",i.innerHTML=' <svg xmlns="http://www.w3.org/2000/svg" height="1.8em" viewBox="0 0 60 55" style="fill: currentColor;"><rect width="18" height="55" /><rect width="18" height="55" transform="translate(42)" /><rect width="18" height="34" transform="translate(21)" /></svg> ',e.appendChild(i),Array.from(document.querySelectorAll(".ItemOptions-itemOptions>.btn-toolbar")).forEach(s=>{s.appendChild(e.cloneNode(!0))})},remove:function(){Array.from(document.querySelectorAll(".mirador-button")).forEach(o=>{o&&o.parentElement&&o.parentElement.removeChild(o)})}},C=function(){let o="mirador";if(!document.getElementById(o)){let a=document.createElement("link");a.id=o,a.rel="stylesheet",a.type="text/css",a.href="/customizations/global/pages/mirador/css/mirador-combined.css",a.media="all",document.head.appendChild(a)}},v=function(){let o={};location.search.split(/\&|\?/g).forEach(function(e){if(e){let i=e.split("="),s=i[0],l=i[1];o[s]=l}});let a={id:"viewer",data:[],buildPath:"/customizations/global/pages/mirador/"};o.manifest&&(a.data.push({manifestUri:o.manifest,location:o.collection||""}),a.windowObjects=[{loadedManifest:o.manifest,canvasID:o.canvas||""}]),Mirador(a)},I=!1,u=["afpl"],n=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",function(o){let a=o.detail.itemId,e=o.detail.collectionId,i=document.querySelector(".field-creato .field-value a");i=i?i.text:null,(I||!u.includes(e)&&!n.includes(i))&&A(a,e).then(function(s){s!==!1&&p.add(s,e)})}),document.addEventListener("cdm-item-page:update",function(o){let a=o.detail.itemId,e=o.detail.collectionId,i=document.querySelector(".field-creato .field-value a");i=i?i.text:null,(I||!u.includes(e)&&!n.includes(i))&&A(a,e).then(function(s){if(s===!1){p.remove();return}else p.remove(),p.add(s,e)})}),document.addEventListener("cdm-item-page:leave",function(o){let a=o.detail.collectionId,e=document.querySelector(".field-creato .field-value a");e=e?e.text:null,(I||!u.includes(a)&&!n.includes(e))&&p.remove()}),document.addEventListener("cdm-custom-page:enter",function(o){o.detail.filename=="mirador"&&_("/customizations/global/pages/js/mirador-cp.js").then(function(){C()})}),document.addEventListener("cdm-custom-page:ready",function(o){o.detail.filename=="mirador"&&_("/customizations/global/pages/mirador/mirador.js").then(function(){v()})})}function O(){"use strict";let _=window.location.origin?window.location.origin+"/":window.location.protocol+"//"+window.location.host,L='<svg height="2em" width="2em" style="margin-bottom:-5px;" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" style="enable-background:new" version="1.1" id="svg2" xml:space="preserve" width="586.95789" height="534.94623" viewBox="0 0 586.95789 534.94622"> <metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs6" /><g style="display:inline" id="g10" transform="matrix(1.3333333,0,0,-1.3333333,42.08939,487.43895)"> <g style="display:inline;" id="layer4"><rect ry="56.48138" transform="scale(1,-1)" y="-354.32922" x="-20.317043" height="378.70969" width="417.71841" id="rect2281" style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:22.5;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" /> </g><g id="g12" transform="scale(0.1)"><path d="M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path14" /><path d="m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path16" /><path d="M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path18" /><path d="m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path20" /><path d="m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path22" /><path d="m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path24" /><path d="m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path26" /></g></g></svg>';function A(o,a){let e={parent:null};return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${a}/${o}/json`).then(function(i){return i.json()}).then(function(i){return i.parent===-1?e.parent=o:e.parent=i.parent,e}).catch(function(i){return console.log("Parent request failed: "+i),!1})}function p(o,a){return fetch(`/iiif/info/${a}/${o.parent}/manifest.json`).then(function(e){return e.status==404?(console.info(`No IIIF manifest exists for this record (id=${o.parent}).`),!1):e.json()}).then(function(e){let i=e;if(!!i.sequences[0].canvases[0]["@id"]){let l=i.sequences[0].canvases,b=[];for(let f=0;f<l.length;f++){let w=l[f]["@id"],y=w.indexOf(a)+a.length+1,E=w.indexOf("/canvas/"),q=w.slice(y,E);f===0&&(o.child=q),b.push(q)}o={...o,allChildren:b}}else o.child=null,o.allChildren=null;return o}).catch(function(e){return console.log("Manifest request failed: "+e),!1})}function C(o,a,e){let i=document.createDocumentFragment(),s=document.createElement("tr");s.classList.add("ItemMetadata-metadatarow",o);let l=document.createElement("td");l.classList.add("ItemMetadata-key","field-label"),l.style.verticalAlign="bottom",l.innerHTML=a;let b=document.createElement("td");b.classList.add("field-value");let f=document.createElement("span");return f.classList.add("field-value-span"),f.appendChild(e),b.appendChild(f),s.appendChild(l),s.appendChild(b),i.appendChild(s),i}let v={insertManifestLink:function(o,a,e,i,s){let l=document.querySelector("div#compoundObjectDescription>div>table>tbody"),b=document.querySelector("div#compoundItemDescription>div>table>tbody"),f=document.querySelector("div#singleItemDescription>div>table>tbody");function w(g,y,E,q,R,M){let h=document.createElement("a");h.target="_blank";let S,r,t,d,c,k,x,m,T,P=document.querySelector(".CompoundItemView-thumbnail");if(P){let B=P.getAttribute("src");k=B.indexOf("/id/")+4,x=B.slice(k),m=x.indexOf("/"),T=x.slice(0,m)}E?g===y&&T===E?(d=g,c=E):(d=y,c=g):(console.log("no child"),d=g,c=g);let j=!1;if(M==="manifest"?(j=!0,S=`${_}iiif/2/${R}:${d}/manifest.json`,h.title="View IIIF Manifest",r="IIIF Manifest",t="iiif-manifest-link"):M==="image"&&q.includes(c)&&(j=!0,S=`${_}iiif/2/${R}:${c}/full/full/0/default.jpg`,h.title="View IIIF Image",r="IIIF Image",t="iiif-image-link"),j)return h.href=S,h.setAttribute("aria-label",h.title),h.innerHTML=L+" "+S,C(t,r,h)}if(!l){let g=w(o,a,e,i,s,"manifest");f.appendChild(g);let y=w(o,a,e,i,s,"image");f.appendChild(y)}if(l){let g=w(o,a,e,i,s,"manifest");l.appendChild(g);let y=w(o,a,e,i,s,"image");b.appendChild(y)}},removeLink:function(){Array.from(document.querySelectorAll(".iiif-manifest-link")).forEach(function(o){o&&o.parentElement&&o.parentElement.removeChild(o)}),Array.from(document.querySelectorAll(".iiif-image-link")).forEach(function(o){o&&o.parentElement&&o.parentElement.removeChild(o)})}},I=!1,u=["afpl"],n=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",function(o){let a=o.detail.itemId,e=o.detail.collectionId,i=document.querySelector(".field-creato .field-value a");i=i?i.text:null,(I||!u.includes(e)&&!n.includes(i))&&A(a,e).then(function(s){s&&p(s,e).then(function(l){if(l)v.insertManifestLink(a,l.parent,l.child,l.allChildren,e);else return})})}),document.addEventListener("cdm-item-page:update",function(o){let a=o.detail.itemId,e=o.detail.collectionId,i=document.querySelector(".field-creato .field-value a");i=i?i.text:null,v.removeLink(),(I||!u.includes(e)&&!n.includes(i))&&A(a,e).then(function(s){s&&p(s,e).then(function(l){if(l)v.insertManifestLink(a,l.parent,l.child,l.allChildren,e);else return})})}),document.addEventListener("cdm-item-page:leave",function(o){let a=o.detail.collectionId,e=document.querySelector(".field-creato .field-value a");e=e?e.text:null,(I||!u.includes(a)&&!n.includes(e))&&v.removeLink()})}O();N();F();D();})();
