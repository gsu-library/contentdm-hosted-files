var removeJs=!1;function gsuFixes(){var e=!1,t=!1,n=document.location.search.slice(1).split("&");for(o=0;o<n.length;o++)n[o].startsWith("debugCss")?e=!0:n[o].startsWith("removeCss")?t=!0:n[o].startsWith("removeJs")&&(removeJs=!0);if(e||t){links=document.getElementsByTagName("link");for(var o=0;o<links.length;o++)if("/customizations/global//styles.min.css"==links[o].getAttribute("href")){if(console.log("Removing local CSS."),links[o].parentNode.removeChild(links[o]),t)break;console.log("Adding CSS from static.");var i="gsuStyle";if(!document.getElementById(i))(a=document.createElement("link")).id=i,a.rel="stylesheet",a.href="https://static.library.gsu.edu/contentdm/styles.css",document.head.appendChild(a);break}}if(!removeJs){var a,l="gsuFont";if(!document.getElementById(l))(a=document.createElement("link")).id=l,a.rel="stylesheet",a.href="https://fonts.googleapis.com/css?family=Lato&display=swap",document.head.appendChild(a);var r=document.getElementById("search-input");r&&r.addEventListener("keydown",(function(e){13===e.keyCode&&(r.blur(),document.body.focus())}));var d="gsuWrapper";if(!document.getElementById(d)){var s=document.querySelector(".CoreLayout-mainWrapperContainer"),c=s.parentNode;(b=document.createElement("div")).className="container",b.setAttribute("id",d),c.insertBefore(b,s),b.appendChild(s)}var m="gsuTitle";if(!document.getElementById(m)){var u=document.getElementById("headerNameDiv");if(u){var p=document.createElement("h2");p.innerHTML='<a href="https://digitalcollections.library.gsu.edu">Digital Collections</a>';var f=document.createElement("h3");f.innerHTML='<a href="https://library.gsu.edu/">Georgia State University Library</a>';var g=document.createElement("div");g.setAttribute("id",m),g.innerHTML=p.outerHTML+f.outerHTML,u.innerHTML=g.outerHTML}}var h="gsuHeader";if(!document.getElementById(h)){var b,I=document.querySelector(".Header-logoNameContainer"),y=document.querySelector(".Header-logoHolder"),v=document.getElementById("headerNameDiv"),w=document.querySelector(".SimpleSearch-searchBox");if(I&&y&&v&&w)y.classList.add("col-sm-3"),v.classList.add("col-sm-6"),w.classList.add("col-sm-3"),(b=document.createElement("div")).setAttribute("id",h),b.className="row",I.insertBefore(b,y),b.appendChild(y),b.appendChild(v),b.appendChild(w);let e;(e=document.querySelector(".Header-logoImage"))&&(e.parentNode.href="https://library.gsu.edu/")}}}function gsuHomePageReady(){var e=document.querySelectorAll(".Card-cardcontainer.col-sm-6");for(i=0;i<e.length;i++)e[i].classList.remove("col-sm-6"),e[i].classList.add("col-sm-3")}function gsuItemPageReady(){var e=window.location.href.match(/collection\/([a-zA-Z0-9-_]+)\//i)[1],t=document.querySelector(".field-digcol .field-value");if(t&&(t=t.textContent)){var n=[{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - City Planning Maps",slug:"atlmaps"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Oral Histories",slug:"atlpoh"},{name:"Planning Atlanta, A New City in the Making, 1949 - Aerial Mosaic and Photographs",slug:"atlaerial"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Photographs",slug:"atlphotos"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Planning Publications",slug:"planATLpubs"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Population-Housing Data",slug:"atlphdata"}].find((e=>e.name===t));void 0!==n&&(e=n.slug)}var o=document.querySelector(".field-identi .field-value span");o=(o=o?o.innerHTML:null).replace(/<[^>]*>?/gm,"");var a=document.querySelector(".field-georef .field-value span");a="yes"==(a=a?a.innerHTML.toLowerCase().replace(/<[^>]*>?/gm,""):null);let l=document.querySelector(".ItemUrl-itemUrlLink a");if(l=l?l.href.replace(/^http:\/\//i,"https://"):null,l){console.log("This is an item link page.");let e=[{urlMatch:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php",idMatch:/cachefile=(.+)$/,embedUrl:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php?cachefile=",iframeAttributes:'width="100%" height="700"'},{urlMatch:"https://www.youtube.com/embed/",idMatch:/\/embed\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://youtu.be/",idMatch:/\.be\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://www.youtube.com/watch",idMatch:/v=(.+)&|v=(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/media",idMatch:/\/([\w\d_-]+)$/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/embed",idMatch:/entryId\/([\w\d_-]+)/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://vimeo.com/",idMatch:/vimeo.com\/(.+)$/,embedUrl:"https://player.vimeo.com/video/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'}],t=document.querySelector(".ItemPreview-container"),n=null,o=null;for(let t=0;t<e.length;t++)if(l.startsWith(e[t].urlMatch)){o=l.match(e[t].idMatch);for(let i=1;i<o.length;i++)if(void 0!==o[i]&&o[i]){n='<iframe src="'+e[t].embedUrl+o[i]+'" '+e[t].iframeAttributes+"></iframe>";break}break}n&&t&&(t.innerHTML=n)}if(o&&e&&a){console.log("This item is georeferenced with a collection of "+e+" and an id of "+o+".");var r="https://geo.library.gsu.edu/overlay/"+e+"/"+o+"/",d="https://geo.library.gsu.edu/geoserver/wms/kml?layers="+o,s="https://geo.library.gsu.edu/geotiffs/"+e+"/"+o+"_geo.tif",c=document.createDocumentFragment();(f=document.createElement("div")).className="btn-group btn-group-default",f.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" target="_blank" href="'+r+'"><span class="fa fa-map"></span> Map Overlay</a>',c.appendChild(f),(f=document.createElement("div")).className="btn-group btn-group-default",f.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+d+'"><span class="fa fa-globe"></span> Google Earth</a>',c.appendChild(f),(f=document.createElement("div")).className="btn-group btn-group-default",f.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+s+'"><span class="fa fa-download"></span> GeoTiff</a>',c.appendChild(f);var m=document.querySelectorAll(".btn-toolbar");for(i=0;i<m.length;i++)m[i].appendChild(c.cloneNode(!0))}if(o&&e&&"atlphdata"==e){console.log("ATL Population and Housing Data.");var u="https://static.library.gsu.edu/contentdm/atlphdata/excel/"+o+".xls",p="https://static.library.gsu.edu/contentdm/atlphdata/csv/"+o+".zip";c=document.createDocumentFragment();(f=document.createElement("div")).className="btn-group btn-group-default",f.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+u+'"><span class="fa fa-file"></span> Excel</a>',c.appendChild(f),(f=document.createElement("div")).className="btn-group btn-group-default",f.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+p+'"><span class="fa fa-file"></span> CSV</a>',c.appendChild(f);m=document.querySelectorAll(".btn-toolbar");for(i=0;i<m.length;i++)m[i].appendChild(c.cloneNode(!0))}if(o&&e&&("planATLpubs"==e||"atlphdata"==e)){console.log("Adding search link to planATLpubs and atlphdata.");var f,g="/digital/search/collection/PlanATL/searchterm/"+o;(f=document.createElement("div")).className="btn-group btn-group-default",f.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+g+'"><span class="fa fa-search"></span> View Item\'s Maps</a>';m=document.querySelectorAll(".btn-toolbar");for(i=0;i<m.length;i++)m[i].appendChild(f.cloneNode(!0))}}document.addEventListener("cdm-home-page:ready",(function(){gsuFixes(),removeJs||gsuHomePageReady()})),document.addEventListener("cdm-search-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-advanced-search-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-collection-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-collection-landing-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-collection-search-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-item-page:ready",(function(){gsuFixes(),removeJs||gsuItemPageReady()})),document.addEventListener("cdm-custom-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-about-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-login-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-notfound-page:ready",(function(){gsuFixes()})),function(){"use strict";const e=window.location.origin?window.location.origin+"/":window.location.protocol+"//"+window.location.host;function t(e,t){let n={parent:null};return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${t}/${e}/json`).then((function(e){return e.json()})).then((function(t){return-1===t.parent?n.parent=e:n.parent=t.parent,n})).catch((function(e){return console.log("Parent request failed: "+e),!1}))}function n(e,t){return fetch(`/iiif/info/${t}/${e.parent}/manifest.json`).then((function(t){return 404==t.status?(console.info(`No IIIF manifest exists for this record (id=${e.parent}).`),!1):t.json()})).then((function(n){let o=n;if(!!o.sequences[0].canvases[0]["@id"]){let n=o.sequences[0].canvases,i=[];for(let o=0;o<n.length;o++){let a=n[o]["@id"],l=a.indexOf(t)+t.length+1,r=a.indexOf("/canvas/"),d=a.slice(l,r);0===o&&(e.child=d),i.push(d)}e={...e,allChildren:i}}else e.child=null,e.allChildren=null;return e})).catch((function(e){return console.log("Manifest request failed: "+e),!1}))}const o=function(t,n,o,i,a){const l=document.querySelector("div#compoundObjectDescription>div>table>tbody"),r=document.querySelector("div#compoundItemDescription>div>table>tbody"),d=document.querySelector("div#singleItemDescription>div>table>tbody");function s(t,n,o,i,a,l){let r,d,s,c,m,u,p,f,g,h=document.createElement("a");h.target="_blank";let b=document.querySelector(".CompoundItemView-thumbnail");if(b){let e=b.getAttribute("src");u=e.indexOf("/id/")+4,p=e.slice(u),f=p.indexOf("/"),g=p.slice(0,f)}o?t===n&&g===o?(c=t,m=o):(c=n,m=t):(console.log("no child"),c=t,m=t);let I=!1;if("manifest"===l?(I=!0,r=`${e}iiif/info/${a}/${c}/manifest.json`,h.title="View IIIF Manifest",d="IIIF Manifest",s="iiif-manifest-link"):"image"===l&&i.includes(m)&&(I=!0,r=`${e}digital/iiif/${a}/${m}/full/full/0/default.jpg`,h.title="View IIIF Image",d="IIIF Image",s="iiif-image-link"),I){h.href=r,h.setAttribute("aria-label",h.title),h.innerHTML='<svg height="2em" width="2em" style="margin-bottom:-5px;" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" style="enable-background:new" version="1.1" id="svg2" xml:space="preserve" width="586.95789" height="534.94623" viewBox="0 0 586.95789 534.94622"> <metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs6" /><g style="display:inline" id="g10" transform="matrix(1.3333333,0,0,-1.3333333,42.08939,487.43895)"> <g style="display:inline;" id="layer4"><rect ry="56.48138" transform="scale(1,-1)" y="-354.32922" x="-20.317043" height="378.70969" width="417.71841" id="rect2281" style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:22.5;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" /> </g><g id="g12" transform="scale(0.1)"><path d="M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path14" /><path d="m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path16" /><path d="M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path18" /><path d="m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path20" /><path d="m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path22" /><path d="m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path24" /><path d="m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path26" /></g></g></svg> '+r;let e=function(e,t,n){let o=document.createDocumentFragment(),i=document.createElement("tr");i.classList.add("ItemMetadata-metadatarow",e);let a=document.createElement("td");a.classList.add("ItemMetadata-key","field-label"),a.style.verticalAlign="bottom",a.innerHTML=t;let l=document.createElement("td");l.classList.add("field-value");let r=document.createElement("span");return r.classList.add("field-value-span"),r.appendChild(n),l.appendChild(r),i.appendChild(a),i.appendChild(l),o.appendChild(i),o}(s,d,h);return e}}if(!l){let e=s(t,n,o,i,a,"manifest");d.appendChild(e);let l=s(t,n,o,i,a,"image");d.appendChild(l)}if(l){let e=s(t,n,o,i,a,"manifest");l.appendChild(e);let d=s(t,n,o,i,a,"image");r.appendChild(d)}},i=function(){Array.from(document.querySelectorAll(".iiif-manifest-link")).forEach((function(e){e&&e.parentElement&&e.parentElement.removeChild(e)})),Array.from(document.querySelectorAll(".iiif-image-link")).forEach((function(e){e&&e.parentElement&&e.parentElement.removeChild(e)}))};let a=["afpl"],l=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",(function(e){let i=e.detail.itemId,r=e.detail.collectionId,d=document.querySelector(".field-creato .field-value a");d=d?d.text:null,a.includes(r)||l.includes(d)||t(i,r).then((function(e){e&&n(e,r).then((function(e){e&&o(i,e.parent,e.child,e.allChildren,r)}))}))})),document.addEventListener("cdm-item-page:update",(function(e){let r=e.detail.itemId,d=e.detail.collectionId,s=document.querySelector(".field-creato .field-value a");s=s?s.text:null,i(),a.includes(d)||l.includes(s)||t(r,d).then((function(e){e&&n(e,d).then((function(e){e&&o(r,e.parent,e.child,e.allChildren,d)}))}))})),document.addEventListener("cdm-item-page:leave",(function(e){let t=e.detail.collectionId,n=document.querySelector(".field-creato .field-value a");n=n?n.text:null,a.includes(t)||l.includes(n)||i()}))}(),function(){"use strict";function e(e){return new Promise((function(t,n){const o=document.createElement("script");o.src=e,o.onload=t,o.onerror=n,document.head.appendChild(o)}))}const t=window.location.origin?`${window.location.origin}/`:`${window.location.protocol}//${window.location.host}/`;function n(e,t){return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${t}/${e}/json`).then((e=>e.json())).then((t=>{let n=!1;return n=-1===t.parent?e:t.parent,n})).then((e=>fetch(`/iiif/info/${t}/${e}/manifest.json`).then((n=>200!=n.status?(console.log("No IIIF manifest exists for this record."),e=!1):fetch(`/digital/api/collections/${t}/items/${e}/false`).then((e=>e.json())).then((t=>"pdf"===t.filename.split(".").pop()?(console.log("pdf?",t.filename.split(".").pop()),e=!1):e)).catch((e=>console.log("Item API request failed.",e))))).catch((t=>(console.log("Manifest request failed.",t),e=!1))))).catch((function(e){return console.log("GetParent request failed.",e),parent=!1,parent}))}const o={getMiradorUrl:function(e,n){return`/digital/custom/mirador?manifest=${`${t}/iiif/info/${n}/${e}/manifest.json`}`},add:function(e,t){const n=document.createElement("div");n.className="btn-group btn-group-default mirador-button";const i=document.createElement("a");i.title="View this item in Mirador",i.className="cdm-btn btn btn-primary",i.href=o.getMiradorUrl(e,t),i.style.paddingTop="5px",i.style.paddingBottom="2px",i.target="_blank",i.innerHTML=' <svg xmlns="http://www.w3.org/2000/svg" height="1.8em" viewBox="0 0 60 55" style="fill: currentColor;"><rect width="18" height="55" /><rect width="18" height="55" transform="translate(42)" /><rect width="18" height="34" transform="translate(21)" /></svg> ',n.appendChild(i),Array.from(document.querySelectorAll(".ItemOptions-itemOptions>.btn-toolbar")).forEach((e=>{e.appendChild(n.cloneNode(!0))}))},remove:function(){Array.from(document.querySelectorAll(".mirador-button")).forEach((e=>{e&&e.parentElement&&e.parentElement.removeChild(e)}))}};let i=["afpl"],a=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",(function(e){const t=e.detail.itemId,l=e.detail.collectionId;let r=document.querySelector(".field-creato .field-value a");r=r?r.text:null,i.includes(l)||a.includes(r)||n(t,l).then((function(e){!1!==e&&o.add(e,l)}))})),document.addEventListener("cdm-item-page:update",(function(e){const t=e.detail.itemId,l=e.detail.collectionId;let r=document.querySelector(".field-creato .field-value a");r=r?r.text:null,i.includes(l)||a.includes(r)||n(t,l).then((function(e){!1!==e?(o.remove(),o.add(e,l)):o.remove()}))})),document.addEventListener("cdm-item-page:leave",(function(e){const t=e.detail.collectionId;let n=document.querySelector(".field-creato .field-value a");n=n?n.text:null,i.includes(t)||a.includes(n)||o.remove()})),document.addEventListener("cdm-custom-page:enter",(function(t){"mirador"==t.detail.filename&&e("/customizations/global/pages/js/mirador-cp.js").then((function(){!function(){const e="mirador";if(!document.getElementById(e)){const t=document.createElement("link");t.id=e,t.rel="stylesheet",t.type="text/css",t.href="/customizations/global/pages/mirador/css/mirador-combined.css",t.media="all",document.head.appendChild(t)}}()}))})),document.addEventListener("cdm-custom-page:ready",(function(t){"mirador"==t.detail.filename&&e("/customizations/global/pages/mirador/mirador.js").then((function(){!function(){let e={};location.search.split(/\&|\?/g).forEach((function(t){if(t){const n=t.split("="),o=n[0],i=n[1];e[o]=i}}));let t={id:"viewer",data:[],buildPath:"/customizations/global/pages/mirador/"};e.manifest&&(t.data.push({manifestUri:e.manifest,location:e.collection||""}),t.windowObjects=[{loadedManifest:e.manifest,canvasID:e.canvas||""}]),Mirador(t)}()}))}))}(),(()=>{let e=!1,t=document.location.search.slice(1).split("&");for(i=0;i<t.length;i++)t[i].startsWith("showAeon")&&(e=!0);if(e){var n="Request Item",o="Request in Reading Room",a="Digital Copy",l={ItemTitle:"collec",ItemSubTitle:"title",ItemDate:"date",DocumentType:"",ItemAuthor:"creato",ItemAuthor2:"interv",ItemAuthor3:"photog",ItemPlace:"",ItemPublisher:"",ItemEdition:"",ItemVolume:"box",ItemIssue:"folder",ItemIssue2:"file",ItemPages:"",Location:"curato",SubLocation:"",PageCount:"",PageCount:"",ItemISxN:"",ItemCitation:"",ItemNumber:"identi",ItemNumber2:"arrang",EADNumber:"",ReferenceNumber:"",CallNumber:"call",Format:"sourca",ServiceLevel:"",ShippingOption:"",ForPublication:"",ItemInfo1:"righth",ItemInfo2:"note",ItemInfo3:"",ItemInfo4:"",ItemInfo5:""},r=null,d=null,s=null,c=null,m=null,u=null;function p(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+e+"/"+t+"/json").then((e=>e.json())).then((e=>(console.log("Item Info"),console.log(e),e))).catch((e=>console.warn(e)))}function f(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+e+"/"+t+"/json").then((e=>e.json())).then((e=>(console.log("Object Info"),console.log(e),e))).catch((e=>console.warn(e)))}function g(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+e+"/"+t+"/json").then((e=>e.json())).then((e=>e)).catch((e=>console.warn(e)))}function h(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+e+"/"+t+"/json").then((e=>e.json())).then((t=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+e+"/"+t.parent+"/json").then((e=>e.json())).then((e=>(console.log("Parent Item Info"),console.log(e),e))).catch((e=>console.warn(e))))).catch((e=>console.warn(e)))}function b(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+e+"/"+t+"/json").then((e=>e.json())).then((t=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+e+"/"+t.page[0].pageptr+"/json").then((e=>e.json())).then((e=>(console.log("Child Item Info"),console.log(e),e))).catch((e=>console.warn(e))))).catch((e=>console.warn(e)))}function I(e){!function(e){var t="https://gsu.aeon.atlas-sys.com/logon";"Loan"===e.RequestType?t+="?Action=10&Form=20&Value=GenericRequestManuscript":t+="?Action=10&Form=20&Value=GenericRequestManuscriptPhotodup";var n=[];for(var o in e)e[o]&&""!==e[o]&&n.push(o+"="+encodeURIComponent(e[o]));t=t+"&"+n.join("&"),console.log("Aeon Request -> "+t),window.open(t)}(function(e){var t={};return t.ItemTitle=d[l.ItemTitle],t.ItemSubTitle=d[l.ItemSubTitle],t.ItemDate=d[l.ItemDate],t.DocumentType=d[l.DocumentType],t.ItemAuthor=d[l.ItemAuthor]+", "+d[l.ItemAuthor2]+", "+d[l.ItemAuthor3],t.ItemPlace=d[l.ItemPlace],t.ItemPublisher=d[l.ItemPublisher],t.ItemEdition=d[l.ItemEdition],t.ItemVolume=d[l.ItemVolume],t.ItemIssue=d[l.ItemIssue]+", "+d[l.ItemIssue2],t.ItemPages=d[l.ItemPages],t.Location=d[l.Location],t.SubLocation=d[l.SubLocation],t.PageCount=d[l.PageCount],t.ItemISxN=d[l.ItemISxN],t.ItemCitation=window.location.href,t.ItemNumber=d[l.ItemNumber]+", "+d[l.ItemNumber2],t.EADNumber=d[l.EADNumber],t.ReferenceNumber=d[l.ReferenceNumber],t.CallNumber=d[l.CallNumber],t.Format=d[l.Format],t.ServiceLevel=d[l.ServiceLevel],t.ShippingOption=d[l.ShippingOption],t.ForPublication=d[l.ForPublication],t.ItemInfo1=d[l.ItemInfo1],t.ItemInfo2=d[l.ItemInfo2],t.ItemInfo3=d[l.ItemInfo3],t.ItemInfo4=d[l.ItemInfo4],t.ItemInfo5=d[l.ItemInfo5],-1==c.parent&&-2!=s.code?t.ItemSubTitle=u[l.ItemSubTitle]:-1!=c.parent&&(t.ItemTitle=m[l.ItemTitle],t.ItemDate=m[l.ItemDate],t.DocumentType=m[l.DocumentType],t.ItemAuthor=m[l.ItemAuthor]+", "+m[l.ItemAuthor2]+", "+m[l.ItemAuthor3],t.ItemPlace=m[l.ItemPlace],t.ItemPublisher=m[l.ItemPublisher],t.ItemEdition=m[l.ItemEdition],t.ItemVolume=m[l.ItemVolume],t.ItemIssue=m[l.ItemIssue]+", "+m[l.ItemIssue2],t.ItemPages=m[l.ItemPages],t.Location=m[l.Location],t.SubLocation=m[l.SubLocation],t.PageCount=m[l.PageCount],t.ItemISxN=m[l.ItemISxN],t.ItemCitation=m[l.ItemCitation],t.ItemNumber=m[l.ItemNumber]+", "+m[l.ItemNumber2],t.EADNumber=m[l.EADNumber],t.ReferenceNumber=m[l.ReferenceNumber],t.CallNumber=m[l.CallNumber],t.Format=m[l.Format],t.ServiceLevel=m[l.ServiceLevel],t.ShippingOption=m[l.ShippingOption],t.ForPublication=m[l.ForPublication],t.ItemInfo1=m[l.ItemInfo1],t.ItemInfo2=m[l.ItemInfo2],t.ItemInfo3=m[l.ItemInfo3],t.ItemInfo4=m[l.ItemInfo4],t.ItemInfo5=m[l.ItemInfo5]),t.RequestType=e,console.log(t),t}(e))}function y(e){e?(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.toggle("show"),document.getElementById("aeon_button_container_mobile").classList.toggle("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","true")):(document.getElementById("aeonrequestmenu-side-bar").classList.toggle("show"),document.getElementById("aeon_button_container").classList.toggle("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","true"))}document.addEventListener("cdm-item-page:ready",(function(e){if(document.getElementById("singleItemDescription")?r="single item":document.getElementById("compoundItemDescription")&&(r="compound object"),p(e.detail.collectionId,e.detail.itemId).then((e=>d=e)),f(e.detail.collectionId,e.detail.itemId).then((e=>s=e)),g(e.detail.collectionId,e.detail.itemId).then((e=>c=e)),h(e.detail.collectionId,e.detail.itemId).then((e=>m=e)),b(e.detail.collectionId,e.detail.itemId).then((e=>m=e)),!r||"single item"!==r&&"compound object"!==r)console.log("Cannot find view element");else if(document.getElementsByClassName("btn-toolbar")){var t=document.getElementsByClassName("btn-toolbar"),i='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+r+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown-mobile" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text_mobile" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar-mobile" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan_mobile" class="aeon_button_option spacePad5" iopt="Loan">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy_mobile" class="aeon_button_option spacePad5" iopt="Copy">Request Copy</a></li></ul>',l=document.createElement("div");l.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),l.setAttribute("id","aeon_button_container_mobile"),l.innerHTML=i,t[0].appendChild(l);var u='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+r+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan" class="aeon_button_option spacePad5" iopt="Loan">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy" class="aeon_button_option spacePad5" iopt="Copy">Request Copy</a></li></ul>',v=document.createElement("div");v.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),v.setAttribute("id","aeon_button_container"),v.innerHTML=u,t[1].appendChild(v),function(){var e=document.getElementById("aeon-dropdown"),t=document.getElementById("aeon_button_text"),i=document.getElementById("aeon_button_option_loan"),l=document.getElementById("aeon_button_option_copy");t.innerHTML=n,e.onclick=function(){y(!1)},i.innerHTML=o,i.onclick=function(){I("Loan")},l.innerHTML=a,l.onclick=function(){I("Copy")};var r=document.getElementById("aeon-dropdown-mobile"),d=document.getElementById("aeon_button_text_mobile"),s=document.getElementById("aeon_button_option_loan_mobile"),c=document.getElementById("aeon_button_option_copy_mobile");d.innerHTML=n,r.onclick=function(){y(!0)},s.innerHTML=o,s.onclick=function(){I("Loan")},c.innerHTML=a,c.onclick=function(){I("Copy")}}()}})),document.addEventListener("cdm-item-page:update",(function(e){p(e.detail.collectionId,e.detail.itemId).then((e=>d=e)),f(e.detail.collectionId,e.detail.itemId).then((e=>s=e)),g(e.detail.collectionId,e.detail.itemId).then((e=>c=e)),h(e.detail.collectionId,e.detail.itemId).then((e=>m=e)),b(e.detail.collectionId,e.detail.itemId).then((e=>u=e))})),window.addEventListener("click",(function(e){document.getElementById("aeon-dropdown").contains(e.target)||(document.getElementById("aeonrequestmenu-side-bar").classList.remove("show"),document.getElementById("aeon_button_container").classList.remove("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","false")),document.getElementById("aeon-dropdown-mobile").contains(e.target)||(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.remove("show"),document.getElementById("aeon_button_container_mobile").classList.remove("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","false"))}))}})();
