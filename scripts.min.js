var removeJs=!1;function gsuFixes(){var e=!1,t=!1,n=document.location.search.slice(1).split("&");for(o=0;o<n.length;o++)n[o].startsWith("debugCss")?e=!0:n[o].startsWith("removeCss")?t=!0:n[o].startsWith("removeJs")&&(removeJs=!0);if(e||t){links=document.getElementsByTagName("link");for(var o=0;o<links.length;o++)if("/customizations/global//styles.min.css"==links[o].getAttribute("href")){if(console.log("Removing local CSS."),links[o].parentNode.removeChild(links[o]),t)break;console.log("Adding CSS from static.");var a="gsuStyle";if(!document.getElementById(a))(i=document.createElement("link")).id=a,i.rel="stylesheet",i.href="https://static.library.gsu.edu/contentdm/styles.css",document.head.appendChild(i);break}}if(!removeJs){var i,l="gsuFont";if(!document.getElementById(l))(i=document.createElement("link")).id=l,i.rel="stylesheet",i.href="https://fonts.googleapis.com/css?family=Lato&display=swap",document.head.appendChild(i);var d=document.getElementById("search-input");d&&d.addEventListener("keydown",(function(e){13===e.keyCode&&(d.blur(),document.body.focus())}));var r="gsuWrapper";if(!document.getElementById(r)){var c=document.querySelector(".CoreLayout-mainWrapperContainer"),s=c.parentNode;(b=document.createElement("div")).className="container",b.setAttribute("id",r),s.insertBefore(b,c),b.appendChild(c)}var u="gsuTitle";if(!document.getElementById(u)){var m=document.getElementById("headerNameDiv");if(m){var p=document.createElement("h2");p.innerHTML='<a href="https://digitalcollections.library.gsu.edu">Digital Collections</a>';var g=document.createElement("h3");g.innerHTML='<a href="https://library.gsu.edu/">Georgia State University Library</a>';var f=document.createElement("div");f.setAttribute("id",u),f.innerHTML=p.outerHTML+g.outerHTML,m.innerHTML=f.outerHTML}}var h="gsuHeader";if(!document.getElementById(h)){var b,y=document.querySelector(".Header-logoNameContainer"),v=document.querySelector(".Header-logoHolder"),I=document.getElementById("headerNameDiv"),w=document.querySelector(".SimpleSearch-searchBox");if(y&&v&&I&&w)v.classList.add("col-sm-3"),I.classList.add("col-sm-6"),w.classList.add("col-sm-3"),(b=document.createElement("div")).setAttribute("id",h),b.className="row",y.insertBefore(b,v),b.appendChild(v),b.appendChild(I),b.appendChild(w);let e;(e=document.querySelector(".Header-logoImage"))&&(e.parentNode.href="https://library.gsu.edu/")}}}function gsuHomePageReady(){var e=document.querySelectorAll(".Card-cardcontainer.col-sm-6");for(i=0;i<e.length;i++)e[i].classList.remove("col-sm-6"),e[i].classList.add("col-sm-3")}function gsuItemPageReady(){var e=window.location.href.match(/collection\/([a-zA-Z0-9-_]+)\//i)[1],t=document.querySelector(".field-digcol .field-value");if(t&&(t=t.textContent)){var n=[{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - City Planning Maps",slug:"atlmaps"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Oral Histories",slug:"atlpoh"},{name:"Planning Atlanta, A New City in the Making, 1949 - Aerial Mosaic and Photographs",slug:"atlaerial"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Photographs",slug:"atlphotos"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Planning Publications",slug:"planATLpubs"},{name:"Planning Atlanta, A New City in the Making, 1930s-1990s - Population-Housing Data",slug:"atlphdata"}].find((e=>e.name===t));void 0!==n&&(e=n.slug)}var o=document.querySelector(".field-identi .field-value span");o=(o=o?o.innerHTML:null).replace(/<[^>]*>?/gm,"");var a=document.querySelector(".field-georef .field-value span");a="yes"==(a=a?a.innerHTML.toLowerCase().replace(/<[^>]*>?/gm,""):null);let l=document.querySelector(".ItemUrl-itemUrlLink a");if(l=l?l.href.replace(/^http:\/\//i,"https://"):null,l){console.log("This is an item link page.");let e=[{urlMatch:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php",idMatch:/cachefile=(.+)$/,embedUrl:"https://webapps.library.gsu.edu/ohms-viewer/viewer.php?cachefile=",iframeAttributes:'width="100%" height="700"'},{urlMatch:"https://www.youtube.com/embed/",idMatch:/\/embed\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://youtu.be/",idMatch:/\.be\/(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://www.youtube.com/watch",idMatch:/v=(.+)&|v=(.+)$/,embedUrl:"https://www.youtube.com/embed/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/media",idMatch:/\/([\w\d_-]+)$/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://mediaspace.gsu.edu/embed",idMatch:/entryId\/([\w\d_-]+)/,embedUrl:"https://mediaspace.gsu.edu/embed/secure/iframe/entryId/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'},{urlMatch:"https://vimeo.com/",idMatch:/vimeo.com\/(.+)$/,embedUrl:"https://player.vimeo.com/video/",iframeAttributes:'width="700" height="400" style="margin:0 auto;" frameborder="0" allowfullscreen'}],t=document.querySelector(".ItemPreview-container"),n=null,o=null;for(let t=0;t<e.length;t++)if(l.startsWith(e[t].urlMatch)){o=l.match(e[t].idMatch);for(let a=1;a<o.length;a++)if(void 0!==o[a]&&o[a]){n='<iframe src="'+e[t].embedUrl+o[a]+'" '+e[t].iframeAttributes+"></iframe>";break}break}n&&t&&(t.innerHTML=n)}if(o&&e&&a){console.log("This item is georeferenced with a collection of "+e+" and an id of "+o+".");var d="https://geo.library.gsu.edu/overlay/"+e+"/"+o+"/",r="https://geo.library.gsu.edu/geoserver/wms/kml?layers="+o,c="https://geo.library.gsu.edu/geotiffs/"+e+"/"+o+"_geo.tif",s=document.createDocumentFragment();(g=document.createElement("div")).className="btn-group btn-group-default",g.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" target="_blank" href="'+d+'"><span class="fa fa-map"></span> Map Overlay</a>',s.appendChild(g),(g=document.createElement("div")).className="btn-group btn-group-default",g.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+r+'"><span class="fa fa-globe"></span> Google Earth</a>',s.appendChild(g),(g=document.createElement("div")).className="btn-group btn-group-default",g.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+c+'"><span class="fa fa-download"></span> GeoTiff</a>',s.appendChild(g);var u=document.querySelectorAll(".btn-toolbar");for(i=0;i<u.length;i++)u[i].appendChild(s.cloneNode(!0))}if(o&&e&&"atlphdata"==e){console.log("ATL Population and Housing Data.");var m="https://static.library.gsu.edu/contentdm/atlphdata/excel/"+o+".xls",p="https://static.library.gsu.edu/contentdm/atlphdata/csv/"+o+".zip";s=document.createDocumentFragment();(g=document.createElement("div")).className="btn-group btn-group-default",g.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+m+'"><span class="fa fa-file"></span> Excel</a>',s.appendChild(g),(g=document.createElement("div")).className="btn-group btn-group-default",g.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+p+'"><span class="fa fa-file"></span> CSV</a>',s.appendChild(g);u=document.querySelectorAll(".btn-toolbar");for(i=0;i<u.length;i++)u[i].appendChild(s.cloneNode(!0))}if(o&&e&&("planATLpubs"==e||"atlphdata"==e)){console.log("Adding search link to planATLpubs and atlphdata.");var g,f="/digital/search/collection/PlanATL/searchterm/"+o;(g=document.createElement("div")).className="btn-group btn-group-default",g.innerHTML='<a class="cdm-btn btn btn-primary gsu-button" href="'+f+'"><span class="fa fa-search"></span> View Item\'s Maps</a>';u=document.querySelectorAll(".btn-toolbar");for(i=0;i<u.length;i++)u[i].appendChild(g.cloneNode(!0))}}document.addEventListener("cdm-home-page:ready",(function(){gsuFixes(),removeJs||gsuHomePageReady()})),document.addEventListener("cdm-search-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-advanced-search-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-collection-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-collection-landing-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-collection-search-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-item-page:ready",(function(){gsuFixes(),removeJs||gsuItemPageReady()})),document.addEventListener("cdm-custom-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-about-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-login-page:ready",(function(){gsuFixes()})),document.addEventListener("cdm-notfound-page:ready",(function(){gsuFixes()})),function(){"use strict";const e=window.location.origin?window.location.origin+"/":window.location.protocol+"//"+window.location.host;function t(e,t){let n={parent:null};return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${t}/${e}/json`).then((function(e){return e.json()})).then((function(t){return-1===t.parent?n.parent=e:n.parent=t.parent,n})).catch((function(e){return console.log("Parent request failed: "+e),!1}))}function n(e,t){return fetch(`/iiif/info/${t}/${e.parent}/manifest.json`).then((function(t){return 404==t.status?(console.info(`No IIIF manifest exists for this record (id=${e.parent}).`),!1):t.json()})).then((function(n){let o=n;if(!!o.sequences[0].canvases[0]["@id"]){let n=o.sequences[0].canvases,a=[];for(let o=0;o<n.length;o++){let i=n[o]["@id"],l=i.indexOf(t)+t.length+1,d=i.indexOf("/canvas/"),r=i.slice(l,d);0===o&&(e.child=r),a.push(r)}e={...e,allChildren:a}}else e.child=null,e.allChildren=null;return e})).catch((function(e){return console.log("Manifest request failed: "+e),!1}))}const o=function(t,n,o,a,i){const l=document.querySelector("div#compoundObjectDescription>div>table>tbody"),d=document.querySelector("div#compoundItemDescription>div>table>tbody"),r=document.querySelector("div#singleItemDescription>div>table>tbody");function c(t,n,o,a,i,l){let d,r,c,s,u,m,p,g,f,h=document.createElement("a");h.target="_blank";let b=document.querySelector(".CompoundItemView-thumbnail");if(b){let e=b.getAttribute("src");m=e.indexOf("/id/")+4,p=e.slice(m),g=p.indexOf("/"),f=p.slice(0,g)}o?t===n&&f===o?(s=t,u=o):(s=n,u=t):(console.log("no child"),s=t,u=t);let y=!1;if("manifest"===l?(y=!0,d=`${e}iiif/2/${i}:${s}/manifest.json`,h.title="View IIIF Manifest",r="IIIF Manifest",c="iiif-manifest-link"):"image"===l&&a.includes(u)&&(y=!0,d=`${e}iiif/2/${i}:${u}/full/full/0/default.jpg`,h.title="View IIIF Image",r="IIIF Image",c="iiif-image-link"),y){h.href=d,h.setAttribute("aria-label",h.title),h.innerHTML='<svg height="2em" width="2em" style="margin-bottom:-5px;" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" style="enable-background:new" version="1.1" id="svg2" xml:space="preserve" width="586.95789" height="534.94623" viewBox="0 0 586.95789 534.94622"> <metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs6" /><g style="display:inline" id="g10" transform="matrix(1.3333333,0,0,-1.3333333,42.08939,487.43895)"> <g style="display:inline;" id="layer4"><rect ry="56.48138" transform="scale(1,-1)" y="-354.32922" x="-20.317043" height="378.70969" width="417.71841" id="rect2281" style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:22.5;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" /> </g><g id="g12" transform="scale(0.1)"><path d="M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path14" /><path d="m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path16" /><path d="M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path18" /><path d="m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path20" /><path d="m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path22" /><path d="m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18" style="fill:#2873ab;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path24" /><path d="m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950" style="fill:#ed1d33;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path26" /></g></g></svg> '+d;let e=function(e,t,n){let o=document.createDocumentFragment(),a=document.createElement("tr");a.classList.add("ItemMetadata-metadatarow",e);let i=document.createElement("td");i.classList.add("ItemMetadata-key","field-label"),i.style.verticalAlign="bottom",i.innerHTML=t;let l=document.createElement("td");l.classList.add("field-value");let d=document.createElement("span");return d.classList.add("field-value-span"),d.appendChild(n),l.appendChild(d),a.appendChild(i),a.appendChild(l),o.appendChild(a),o}(c,r,h);return e}}if(!l){let e=c(t,n,o,a,i,"manifest");r.appendChild(e);let l=c(t,n,o,a,i,"image");r.appendChild(l)}if(l){let e=c(t,n,o,a,i,"manifest");l.appendChild(e);let r=c(t,n,o,a,i,"image");d.appendChild(r)}},a=function(){Array.from(document.querySelectorAll(".iiif-manifest-link")).forEach((function(e){e&&e.parentElement&&e.parentElement.removeChild(e)})),Array.from(document.querySelectorAll(".iiif-image-link")).forEach((function(e){e&&e.parentElement&&e.parentElement.removeChild(e)}))};let i=["afpl"],l=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",(function(e){let a=e.detail.itemId,d=e.detail.collectionId,r=document.querySelector(".field-creato .field-value a");r=r?r.text:null,i.includes(d)||l.includes(r)||t(a,d).then((function(e){e&&n(e,d).then((function(e){e&&o(a,e.parent,e.child,e.allChildren,d)}))}))})),document.addEventListener("cdm-item-page:update",(function(e){let d=e.detail.itemId,r=e.detail.collectionId,c=document.querySelector(".field-creato .field-value a");c=c?c.text:null,a(),i.includes(r)||l.includes(c)||t(d,r).then((function(e){e&&n(e,r).then((function(e){e&&o(d,e.parent,e.child,e.allChildren,r)}))}))})),document.addEventListener("cdm-item-page:leave",(function(e){let t=e.detail.collectionId,n=document.querySelector(".field-creato .field-value a");n=n?n.text:null,i.includes(t)||l.includes(n)||a()}))}(),function(){"use strict";function e(e){return new Promise((function(t,n){const o=document.createElement("script");o.src=e,o.onload=t,o.onerror=n,document.head.appendChild(o)}))}const t=window.location.origin?`${window.location.origin}/`:`${window.location.protocol}//${window.location.host}/`;function n(e,t){return fetch(`/digital/bl/dmwebservices/index.php?q=GetParent/${t}/${e}/json`).then((e=>e.json())).then((t=>{let n=!1;return n=-1===t.parent?e:t.parent,n})).then((e=>fetch(`/iiif/info/${t}/${e}/manifest.json`).then((n=>200!=n.status?(console.log("No IIIF manifest exists for this record."),e=!1):fetch(`/digital/api/collections/${t}/items/${e}/false`).then((e=>e.json())).then((t=>"pdf"===t.filename.split(".").pop()?(console.log("pdf?",t.filename.split(".").pop()),e=!1):e)).catch((e=>console.log("Item API request failed.",e))))).catch((t=>(console.log("Manifest request failed.",t),e=!1))))).catch((function(e){return console.log("GetParent request failed.",e),parent=!1,parent}))}const o={getMiradorUrl:function(e,n){return`/digital/custom/mirador?manifest=${`${t}/iiif/info/${n}/${e}/manifest.json`}`},add:function(e,t){const n=document.createElement("div");n.className="btn-group btn-group-default mirador-button";const a=document.createElement("a");a.title="View this item in Mirador",a.className="cdm-btn btn btn-primary",a.href=o.getMiradorUrl(e,t),a.style.paddingTop="5px",a.style.paddingBottom="2px",a.target="_blank",a.innerHTML=' <svg xmlns="http://www.w3.org/2000/svg" height="1.8em" viewBox="0 0 60 55" style="fill: currentColor;"><rect width="18" height="55" /><rect width="18" height="55" transform="translate(42)" /><rect width="18" height="34" transform="translate(21)" /></svg> ',n.appendChild(a),Array.from(document.querySelectorAll(".ItemOptions-itemOptions>.btn-toolbar")).forEach((e=>{e.appendChild(n.cloneNode(!0))}))},remove:function(){Array.from(document.querySelectorAll(".mirador-button")).forEach((e=>{e&&e.parentElement&&e.parentElement.removeChild(e)}))}};let a=["afpl"],i=["Atlanta Journal-Constitution"];document.addEventListener("cdm-item-page:ready",(function(e){const t=e.detail.itemId,l=e.detail.collectionId;let d=document.querySelector(".field-creato .field-value a");d=d?d.text:null,a.includes(l)||i.includes(d)||n(t,l).then((function(e){!1!==e&&o.add(e,l)}))})),document.addEventListener("cdm-item-page:update",(function(e){const t=e.detail.itemId,l=e.detail.collectionId;let d=document.querySelector(".field-creato .field-value a");d=d?d.text:null,a.includes(l)||i.includes(d)||n(t,l).then((function(e){!1!==e?(o.remove(),o.add(e,l)):o.remove()}))})),document.addEventListener("cdm-item-page:leave",(function(e){const t=e.detail.collectionId;let n=document.querySelector(".field-creato .field-value a");n=n?n.text:null,a.includes(t)||i.includes(n)||o.remove()})),document.addEventListener("cdm-custom-page:enter",(function(t){"mirador"==t.detail.filename&&e("/customizations/global/pages/js/mirador-cp.js").then((function(){!function(){const e="mirador";if(!document.getElementById(e)){const t=document.createElement("link");t.id=e,t.rel="stylesheet",t.type="text/css",t.href="/customizations/global/pages/mirador/css/mirador-combined.css",t.media="all",document.head.appendChild(t)}}()}))})),document.addEventListener("cdm-custom-page:ready",(function(t){"mirador"==t.detail.filename&&e("/customizations/global/pages/mirador/mirador.js").then((function(){!function(){let e={};location.search.split(/\&|\?/g).forEach((function(t){if(t){const n=t.split("="),o=n[0],a=n[1];e[o]=a}}));let t={id:"viewer",data:[],buildPath:"/customizations/global/pages/mirador/"};e.manifest&&(t.data.push({manifestUri:e.manifest,location:e.collection||""}),t.windowObjects=[{loadedManifest:e.manifest,canvasID:e.canvas||""}]),Mirador(t)}()}))}))}(),function(){"use strict";["cdm-item-page:ready","cdm-item-page:update"].forEach((function(e){document.addEventListener(e,(function(e){e.detail.itemId,e.detail.collectionId;document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove(),fetch("/customizations/global/pages/js/rights.json").then((e=>e.json())).then((e=>e)).catch((e=>(console.log("Rights JSON request failed:",e),!1))).then((e=>{!function(e){if(e){const t=document.querySelectorAll("tr.ItemMetadata-metadatarow > td.field-value > span");Array.from(t).forEach((t=>{t.innerText&&e.right.forEach((e=>{if(e.uri===t.textContent){let n=document.createElement("div");n.id="right-badge-ui";let o=document.createElement("div");o.style.margin="0.5em 0",o.innerHTML=`<img style="height: 2.2em;" src="https://cdmdemo.contentdm.oclc.org/customizations/global/pages/img/${e.button_url.file}"/>`;let a=document.createElement("div");a.style.margin="0.5em 0",a.innerHTML=`${e.name}`;let i=document.createElement("div");i.style.wordBreak="normal",i.innerHTML=`${e.text_en}`,n.append(o,a,i),t.append(n)}}))}))}}(e)}))}))})),document.addEventListener("cdm-item-page:leave",(function(e){e.detail.collectionId;document.getElementById("right-badge-ui")&&document.getElementById("right-badge-ui").remove()}))}(),(()=>{var e="Request Item",t="Request in Reading Room",n="Digital Copy/Licensing",o="collec",a="title",i="date",l="",d="creato",r="interv",c="photog",s="",u="",m="",p="box",g="folder",f="file",h="",b="curato",y="",v="",I="",w="",A="identi",E="arrang",L="",C="",x="call",q="sourca",M="",_="",k="",S="righth",T="note",B="",P="",j="",H=null,N=null,R=null,F=null,z=null,D=null;function O(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+e+"/"+t+"/json").then((e=>e.json())).then((e=>(console.log("Item Info"),console.log(e),e))).catch((e=>console.warn(e)))}function $(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+e+"/"+t+"/json").then((e=>e.json())).then((e=>(console.log("Object Info"),console.log(e),e))).catch((e=>console.warn(e)))}function V(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+e+"/"+t+"/json").then((e=>e.json())).then((e=>e)).catch((e=>console.warn(e)))}function G(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=GetParent/"+e+"/"+t+"/json").then((e=>e.json())).then((t=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+e+"/"+t.parent+"/json").then((e=>e.json())).then((e=>(console.log("Parent Item Info"),console.log(e),e))).catch((e=>console.warn(e))))).catch((e=>console.warn(e)))}function U(e,t){return fetch("/digital/bl/dmwebservices/index.php?q=dmGetCompoundObjectInfo/"+e+"/"+t+"/json").then((e=>e.json())).then((t=>fetch("/digital/bl/dmwebservices/index.php?q=dmGetItemInfo/"+e+"/"+t.page[0].pageptr+"/json").then((e=>e.json())).then((e=>(console.log("Child Item Info"),console.log(e),e))).catch((e=>console.warn(e))))).catch((e=>console.warn(e)))}function J(e){!function(e){var t="https://gsu.aeon.atlas-sys.com/logon";"Loan"===e.RequestType?t+="?Action=10&Form=20&Value=GenericRequestManuscript":t+="?Action=10&Form=20&Value=GenericRequestManuscriptPhotodup";var n=[];for(var o in e)e[o]&&""!==e[o]&&n.push(o+"="+encodeURIComponent(e[o]));t=t+"&"+n.join("&"),console.log("Aeon Request -> "+t),window.open(t)}(function(e){var t={};return t.ItemTitle=N[o],t.ItemSubTitle=N[a],t.ItemDate=N[i],t.DocumentType=N[l],t.ItemAuthor=N[d]+", "+N[r]+", "+N[c],t.ItemPlace=N[s],t.ItemPublisher=N[u],t.ItemEdition=N[m],t.ItemVolume=N[p],t.ItemIssue=N[g]+", "+N[f],t.ItemPages=N[h],t.Location=N[b],t.SubLocation=N[y],t.PageCount=N[v],t.ItemISxN=N[I],t.ItemCitation=window.location.href,t.ItemNumber=N[A]+", "+N[E],t.EADNumber=N[L],t.ReferenceNumber=N[C],t.CallNumber=N[x],t.Format=N[q],t.ServiceLevel=N[M],t.ShippingOption=N[_],t.ForPublication=N[k],t.ItemInfo1=N[S],t.ItemInfo2=N[T],t.ItemInfo3=N[B],t.ItemInfo4=N[P],t.ItemInfo5=N[j],-1==F.parent&&-2!=R.code&&null!==D?t.ItemSubTitle=D[a]:-1!=F.parent&&(t.ItemTitle=z[o],t.ItemDate=z[i],t.DocumentType=z[l],t.ItemAuthor=z[d]+", "+z[r]+", "+z[c],t.ItemPlace=z[s],t.ItemPublisher=z[u],t.ItemEdition=z[m],t.ItemVolume=z[p],t.ItemIssue=z[g]+", "+z[f],t.ItemPages=z[h],t.Location=z[b],t.SubLocation=z[y],t.PageCount=z[v],t.ItemISxN=z[I],t.ItemCitation=z[w],t.ItemNumber=z[A]+", "+z[E],t.EADNumber=z[L],t.ReferenceNumber=z[C],t.CallNumber=z[x],t.Format=z[q],t.ServiceLevel=z[M],t.ShippingOption=z[_],t.ForPublication=z[k],t.ItemInfo1=z[S],t.ItemInfo2=z[T],t.ItemInfo3=z[B],t.ItemInfo4=z[P],t.ItemInfo5=z[j]),t.RequestType=e,console.log("Request"),console.dir(t),t}(e))}function K(e){e?(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.toggle("show"),document.getElementById("aeon_button_container_mobile").classList.toggle("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","true")):(document.getElementById("aeonrequestmenu-side-bar").classList.toggle("show"),document.getElementById("aeon_button_container").classList.toggle("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","true"))}document.addEventListener("cdm-item-page:ready",(function(o){if(document.getElementById("singleItemDescription")?H="single item":document.getElementById("compoundItemDescription")&&(H="compound object"),O(o.detail.collectionId,o.detail.itemId).then((e=>N=e)),$(o.detail.collectionId,o.detail.itemId).then((e=>R=e)),V(o.detail.collectionId,o.detail.itemId).then((e=>F=e)),G(o.detail.collectionId,o.detail.itemId).then((e=>z=e)),U(o.detail.collectionId,o.detail.itemId).then((e=>z=e)),!H||"single item"!==H&&"compound object"!==H)console.log("Cannot find view element");else if(document.getElementsByClassName("btn-toolbar")){var a=document.getElementsByClassName("btn-toolbar"),i='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+H+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown-mobile" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text_mobile" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar-mobile" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan_mobile" class="aeon_button_option spacePad5" iopt="Loan">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy_mobile" class="aeon_button_option spacePad5" iopt="Copy">Request Copy</a></li></ul>',l=document.createElement("div");l.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),l.setAttribute("id","aeon_button_container_mobile"),l.innerHTML=i,a[0].appendChild(l);var d='<button title="Aeon Request" aria-label="Aeon Request" data-metrics-event-name="event" data-metrics-merge-pagedefaults="true" data-metrics-event-category="'+H+'" data-metrics-event-action="click" data-metrics-event-label="Aeon request menu" id="aeon-dropdown" role="button" aria-haspopup="true" aria-expanded="false" type="button" class="cdm-btn dropdown-toggle btn btn-primary" style="height: 36px;"><span style="display: none;width: 24px;height: 24px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAk1BMVEX////15uT48O789/b47+389/b89/b15uT47+389/b89/bKW0PZlYvGSCfkuLHdopnKW0PowrzKXEXry8fy3tvObVvObFndoZjSfG3ry8bViHzv1dHViX357+768vHXj4TnwbzZlovqyMTdpJzfqKDszsrsz8rfqqLv1tLx2tfhrqb15+Xhrqfjta/+/f347ez37OqPABpgAAAADXRSTlMAPz8/R0djeHiDk+/vTVNvBAAAAIdJREFUeF6Nz8UOw1AQQ9FiinceB6HM+P9fVyVRu+4sj2TZ0/vvxneNscngC/2FSdkoJOtgGEOR4hE9auGgLNanLgjLFvLSmGCrqzHQgobgil1VC0wbiKGh9/MI8wYeIuK8f9UK3UYyIJjb5QxJ17tShSuVgI46iE4gCuLJb3u23et8Pfvv0Q8/FQoOmpKY8QAAAABJRU5ErkJggg==);background-size: 24px;"></span><span id="aeon_button_text" class="menu_button_text" style="font-size: 15px;padding: 10px;vertical-align: super;">Aeon Request</span><span class="caret" style="margin-top: -15px;"></span></button><ul id="aeonrequestmenu-side-bar" role="menu" class="dropdown-menu" aria-labelledby="aeon-dropdown"><li role="presentation"><a id="aeon_button_option_loan" class="aeon_button_option spacePad5" iopt="Loan" style="cursor:pointer">Request for Reading Room</a></li><li role="presentation"><a id="aeon_button_option_copy" class="aeon_button_option spacePad5" iopt="Copy" style="cursor:pointer">Request Copy</a></li></ul>',r=document.createElement("div");r.setAttribute("class","ItemDownloadImage-itemDownloadDropdown dropdown btn-group"),r.setAttribute("id","aeon_button_container"),r.innerHTML=d,a[1].appendChild(r),function(){var o=document.getElementById("aeon-dropdown"),a=document.getElementById("aeon_button_text"),i=document.getElementById("aeon_button_option_loan"),l=document.getElementById("aeon_button_option_copy");a.innerHTML=e,o.onclick=function(){K(!1)},i.innerHTML=t,i.onclick=function(){J("Loan")},l.innerHTML=n,l.onclick=function(){J("Copy")};var d=document.getElementById("aeon-dropdown-mobile"),r=document.getElementById("aeon_button_text_mobile"),c=document.getElementById("aeon_button_option_loan_mobile"),s=document.getElementById("aeon_button_option_copy_mobile");r.innerHTML=e,d.onclick=function(){K(!0)},c.innerHTML=t,c.onclick=function(){J("Loan")},s.innerHTML=n,s.onclick=function(){J("Copy")}}(),window.addEventListener("click",(function(e){document.getElementById("aeon-dropdown").contains(e.target)||(document.getElementById("aeonrequestmenu-side-bar").classList.remove("show"),document.getElementById("aeon_button_container").classList.remove("open"),document.getElementById("aeon-dropdown").setAttribute("aria-expanded","false")),document.getElementById("aeon-dropdown-mobile").contains(e.target)||(document.getElementById("aeonrequestmenu-side-bar-mobile").classList.remove("show"),document.getElementById("aeon_button_container_mobile").classList.remove("open"),document.getElementById("aeon-dropdown-mobile").setAttribute("aria-expanded","false"))}))}})),document.addEventListener("cdm-item-page:update",(function(e){O(e.detail.collectionId,e.detail.itemId).then((e=>N=e)),$(e.detail.collectionId,e.detail.itemId).then((e=>R=e)),V(e.detail.collectionId,e.detail.itemId).then((e=>F=e)),G(e.detail.collectionId,e.detail.itemId).then((e=>z=e)),U(e.detail.collectionId,e.detail.itemId).then((e=>D=e))}))})();
